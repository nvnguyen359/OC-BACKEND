import{a as Q}from"./chunk-FIPQHNYE.js";import{a as Ve,b as B}from"./chunk-L4DIK7LK.js";import{a as Je,b as qe}from"./chunk-FVGKTF52.js";import{a as Ge}from"./chunk-DGOXWP7O.js";import{a as Ze,b as Ye}from"./chunk-LJNQN635.js";import"./chunk-XV66PAZG.js";import{a as et,b as tt}from"./chunk-CCNTREEN.js";import{a as Xe}from"./chunk-B2CXB3HZ.js";import"./chunk-OL4HAED7.js";import{b as H,c as z}from"./chunk-EG54LRXD.js";import{$a as Oe,Bb as C,C as ge,Cb as h,Dc as $e,Ec as Fe,Fc as Ue,G as fe,Gb as ke,Gc as N,H as he,Hb as Ee,Ia as $,Ib as Te,Kc as L,La as s,Mb as De,Nb as M,Nd as re,Ob as Pe,Oc as We,P as j,Pb as F,Pe as Qe,Qb as p,Rb as P,Rd as je,Re as Ke,Sa as Se,Sb as y,T as ve,Ta as te,Tc as V,U as f,Xb as Ne,Xd as S,Ya as D,Yb as Le,Z as _,_ as x,_a as we,a as oe,ac as Ae,ae as Be,b as se,cb as v,ce as He,e as ce,ec as ie,f as le,fa as be,fc as ne,h as ee,i as R,ia as g,j as de,ja as _e,jc as I,l as W,la as xe,ne as ze,o as me,oa as ye,pb as d,pc as Re,qb as o,rb as c,s as pe,sa as Ce,sb as m,wb as Me,xb as Ie,y as ue,zb as E}from"./chunk-ESYVRVYB.js";var at={url:"",deserializer:n=>JSON.parse(n.data),serializer:n=>JSON.stringify(n)},ot="WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }",K=class n extends de{constructor(e,t){if(super(),this._socket=null,e instanceof ee)this.destination=t,this.source=e;else{let i=this._config=Object.assign({},at);if(this._output=new R,typeof e=="string")i.url=e;else for(let a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);if(!i.WebSocketCtor&&WebSocket)i.WebSocketCtor=WebSocket;else if(!i.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new W}}lift(e){let t=new n(this._config,this.destination);return t.operator=e,t.source=this,t}_resetState(){this._socket=null,this.source||(this.destination=new W),this._output=new R}multiplex(e,t,i){let a=this;return new ee(r=>{try{a.next(e())}catch(u){r.error(u)}let l=a.subscribe({next:u=>{try{i(u)&&r.next(u)}catch(b){r.error(b)}},error:u=>r.error(u),complete:()=>r.complete()});return()=>{try{a.next(t())}catch(u){r.error(u)}l.unsubscribe()}})}_connectSocket(){let{WebSocketCtor:e,protocol:t,url:i,binaryType:a}=this._config,r=this._output,l=null;try{l=t?new e(i,t):new e(i),this._socket=l,a&&(this._socket.binaryType=a)}catch(b){r.error(b);return}let u=new ce(()=>{this._socket=null,l&&l.readyState===1&&l.close()});l.onopen=b=>{let{_socket:w}=this;if(!w){l.close(),this._resetState();return}let{openObserver:U}=this._config;U&&U.next(b);let Y=this.destination;this.destination=le.create(O=>{if(l.readyState===1)try{let{serializer:T}=this._config;l.send(T(O))}catch(T){this.destination.error(T)}},O=>{let{closingObserver:T}=this._config;T&&T.next(void 0),O&&O.code?l.close(O.code,O.reason):r.error(new TypeError(ot)),this._resetState()},()=>{let{closingObserver:O}=this._config;O&&O.next(void 0),l.close(),this._resetState()}),Y&&Y instanceof W&&u.add(Y.subscribe(this.destination))},l.onerror=b=>{this._resetState(),r.error(b)},l.onclose=b=>{l===this._socket&&this._resetState();let{closeObserver:w}=this._config;w&&w.next(b),b.wasClean?r.complete():r.error(b)},l.onmessage=b=>{try{let{deserializer:w}=this._config;r.next(w(b))}catch(w){r.error(w)}}}_subscribe(e){let{source:t}=this;return t?t.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add(()=>{let{_socket:i}=this;this._output.observers.length===0&&(i&&(i.readyState===1||i.readyState===0)&&i.close(),this._resetState())}),e)}unsubscribe(){let{_socket:e}=this;e&&(e.readyState===1||e.readyState===0)&&e.close(),this._resetState(),super.unsubscribe()}};function ae(n){return new K(n)}var k=class n{constructor(e){this.platformId=e}http=f(V);API_PREFIX="/cameras";streamMessages$=new R;messages$=this.streamMessages$.asObservable();socket$=null;get baseUrl(){return`${S.apiUrl}${this.API_PREFIX}`}get wsUrl(){return S.apiUrl.replace(/^http/,"ws")+this.API_PREFIX+"/ws"}connectSocket(e,t){if(!We(this.platformId)||(e||(e=localStorage.getItem("token")||""),this.socket$&&!this.socket$.closed))return;let i=null;if(e)try{let r=Ve(e);i=r.id||r.user_id||(Number(r.sub)?Number(r.sub):null)}catch(r){console.error("[StreamService] Token decode error:",r)}let a=`${this.wsUrl}?token=${e}`;i&&(a+=`&user_id=${i}`),t&&(a+=`&camera_id=${t}`),this.socket$=ae({url:a,openObserver:{next:()=>console.log("\u2705 WS Connected")},closeObserver:{next:()=>console.log("\u274C WS Closed")},deserializer:r=>{try{return JSON.parse(r.data)}catch{return r.data}}}),this.socket$.pipe(fe(r=>r.pipe(ge(3e3)))).subscribe({next:r=>this.streamMessages$.next(r),error:r=>console.error("WS Fatal Error:",r)})}disconnectSocket(){this.socket$&&(this.socket$.complete(),this.socket$=null)}getCameraStream(e){return this.messages$.pipe(ue(t=>String(t.camera_id)===String(e)),he())}getCameras(){return this.http.get(this.baseUrl)}toggleCamera(e,t,i=!1){return t==="disconnect"&&!i?(console.log(`[StreamService] Blocked 'disconnect' for Cam ${e} (UI Only)`),me({success:!0,message:"UI Disconnected Only"})):this.http.post(`${this.baseUrl}/${e}/${t}`,{})}startRecording(e,t="MANUAL"){return this.http.post(`${this.baseUrl}/${e}/record?action=start&code=${t}`,{})}stopRecording(e){return this.http.post(`${this.baseUrl}/${e}/record?action=stop`,{})}getAIOverlay(e){return this.http.get(`${this.baseUrl}/${e}/ai-overlay`)}static \u0275fac=function(t){return new(t||n)(ve(Ce))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var J=class n{http=f(V);apiUrl=`${S.apiUrl}/orders`;getDailyStats(){return this.http.get(this.apiUrl,{params:{date_preset:"today",limit:1e3}}).pipe(pe(e=>{let t=e.data?.items||[],i=t.filter(r=>r.status==="packed"||r.status==="closed").length,a=t.filter(r=>r.status==="packing"||r.status==="processing").length;return{completed:i,packing:a}}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function st(n,e){n&1&&(o(0,"div",3),m(1,"div",4)(2,"div",4),c())}function ct(n,e){if(n&1&&(o(0,"div",5)(1,"div",6)(2,"div",7)(3,"div")(4,"span",8),p(5,"\u0110\xE3 xong h\xF4m nay"),c(),o(6,"div",9),p(7),c()(),o(8,"div",10),m(9,"i",11),c()()(),o(10,"div",6)(11,"div",12)(12,"div",13)(13,"span",8),p(14,"\u0110ang \u0111\xF3ng g\xF3i"),c(),o(15,"div",14),p(16),c()(),o(17,"div",15),m(18,"i",16),c()()()()),n&2){let t=h();s(7),y(" ",t.completedCount()," "),s(9),y(" ",t.packingCount()," "),s(2),M("pi-box",t.packingCount()===0)("pi-spin",t.packingCount()>0)("pi-spinner",t.packingCount()>0)}}var q=class n{statsService=f(J);streamService=f(k);sub=null;completedCount=g(0);packingCount=g(0);isLoading=g(!0);ngOnInit(){this.fetchInitialStats(),this.sub=this.streamService.messages$.subscribe(e=>{this.handleSocketMessage(e)})}ngOnDestroy(){this.sub?.unsubscribe()}fetchInitialStats(){this.statsService.getDailyStats().subscribe({next:e=>{this.completedCount.set(e.completed),this.packingCount.set(e.packing),this.isLoading.set(!1)},error:e=>{console.error("L\u1ED7i l\u1EA5y th\u1ED1ng k\xEA:",e),this.isLoading.set(!1)}})}handleSocketMessage(e){if(!(!e||!e.event))switch(e.event){case"ORDER_CREATED":this.packingCount.update(t=>t+1);break;case"ORDER_STOPPED":this.packingCount.update(t=>Math.max(0,t-1)),this.completedCount.update(t=>t+1);break}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=D({type:n,selectors:[["app-activity-stats"]],decls:3,vars:2,consts:[[1,"flex","flex-column","gap-3","w-full"],["class","flex gap-2 animate-pulse",4,"ngIf"],["class","stats-container grid grid-nogutter gap-2",4,"ngIf"],[1,"flex","gap-2","animate-pulse"],[1,"flex-1","h-6rem","bg-gray-800","border-round"],[1,"stats-container","grid","grid-nogutter","gap-2"],[1,"col-12","md:col-6","w-full"],[1,"stat-card","surface-card","border-round","p-3","shadow-2","border-left-3","border-green-500","flex","align-items-center","justify-content-between","h-full"],[1,"block","text-500","font-medium","mb-1","text-sm"],[1,"text-900","font-bold","text-2xl","text-green-500"],[1,"flex","align-items-center","justify-content-center","bg-green-100","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-check-circle","text-green-500","text-xl"],[1,"stat-card","surface-card","border-round","p-3","shadow-2","border-left-3","border-orange-500","flex","align-items-center","justify-content-between","h-full","relative","overflow-hidden"],[1,"z-1"],[1,"text-900","font-bold","text-2xl","text-orange-500"],[1,"z-1","flex","align-items-center","justify-content-center","bg-orange-100","border-round",2,"width","2.5rem","height","2.5rem"],[1,"pi","text-orange-500","text-xl"]],template:function(t,i){t&1&&(o(0,"div",0),v(1,st,3,0,"div",1)(2,ct,19,8,"div",2),c()),t&2&&(s(),d("ngIf",i.isLoading()),s(),d("ngIf",!i.isLoading()))},dependencies:[L,N],encapsulation:2})};var G=class n{constructor(e,t){this.renderer=t;this.canvas=e.nativeElement,this.ctx=this.canvas.getContext("2d")}metadata=[];imgWidth=1280;imgHeight=720;mode="both";canvas;ctx=null;ngOnChanges(e){(e.imgWidth||e.imgHeight)&&(this.renderer.setAttribute(this.canvas,"width",this.imgWidth.toString()),this.renderer.setAttribute(this.canvas,"height",this.imgHeight.toString())),this.draw()}draw(){!this.ctx||!this.canvas||(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!(this.mode==="NONE"||!this.metadata||this.metadata.length===0)&&(this.ctx.lineWidth=2,this.ctx.font="bold 16px Segoe UI, Arial",this.ctx.textBaseline="bottom",this.metadata.forEach(e=>{if(!e)return;let t,i,a,r;if(e.box&&Array.isArray(e.box)?[t,i,a,r]=e.box:(t=e.x,i=e.y,a=e.w,r=e.h),t===void 0||i===void 0||a<=0||r<=0)return;let l=e.color||"#3498db",u=e.label||"Object",b=l==="#2ecc71"||u.includes("QR"),w=l==="#e74c3c"||u.includes("Human")||u.includes("Person");if(this.mode==="scan"&&!b||this.mode==="security"&&!w)return;this.ctx.strokeStyle=l,this.ctx.beginPath(),this.ctx.rect(t,i,a,r),this.ctx.stroke(),this.ctx.fillStyle=l,this.ctx.globalAlpha=.1,this.ctx.fillRect(t,i,a,r),this.ctx.globalAlpha=1;let U=this.ctx.measureText(u).width;this.ctx.fillStyle=l,this.ctx.fillRect(t,i-24,U+10,24),this.ctx.fillStyle="#ffffff",this.ctx.fillText(u,t+5,i-5)})))}static \u0275fac=function(t){return new(t||n)(te(ye),te(Se))};static \u0275dir=we({type:n,selectors:[["","appVisualizer",""]],inputs:{metadata:"metadata",imgWidth:"imgWidth",imgHeight:"imgHeight",mode:"mode"},features:[xe]})};var dt=["viewport"],mt=(n,e,t,i)=>({"status-idle":n,"status-buffering":e,"status-packing":t,"status-warning":i});function pt(n,e){n&1&&(o(0,"div",22),m(1,"i",23),o(2,"span",24),p(3,"M\u1EA5t t\xEDn hi\u1EC7u"),c()())}function ut(n,e){if(n&1){let t=E();Me(0),o(1,"div",25)(2,"img",26),C("load",function(a){_(t);let r=h();return x(r.onImageLoad(a))})("error",function(a){_(t);let r=h();return x(r.onImageError(a))}),c(),m(3,"canvas",27),c(),Ie()}if(n&2){let t=h();s(2),d("src",t.streamUrl(),$),s(),d("metadata",t.visibleOverlayData())("imgWidth",t.imgWidth())("imgHeight",t.imgHeight())("mode",t.viewMode()==="ALL"?"both":t.viewMode()==="QRCODE"?"scan":"security")}}function gt(n,e){if(n&1&&(o(0,"div",29),m(1,"i",30),o(2,"span",31),p(3),c()()),n&2){let t=h().$implicit;s(),F(t.icon),s(2),P(t.label)}}function ft(n,e){if(n&1&&v(0,gt,4,3,"div",28),n&2){let t=e.$implicit;d("ngIf",t)}}function ht(n,e){if(n&1&&(o(0,"div",29),m(1,"i"),o(2,"span",32),p(3),c()()),n&2){let t=e.$implicit;s(),F(t.icon),s(2),P(t.label)}}var X=class n{cameraId;cameraName="Camera";autoConnect=!1;streamService=f(k);cameraService=f(Q);messageService=f(re);storageService=f(B);settingsService=f(Xe);sub=null;uiLoopInterval;hideControlsTimer;scanResetTimer;orderInfoResetTimer;isStreaming=g(!1);isLoading=g(!1);isFullscreen=g(!1);isBuffering=g(!1);recordingState=g("IDLE");orderCode=g(null);scannedCode=g(null);qrCode="";showControls=g(!0);viewMode=g("ALL");rawOverlayData=g([]);imgWidth=g(1280);imgHeight=g(720);aspectRatio=I(()=>`${this.imgWidth()} / ${this.imgHeight()}`);timeoutPercent=g(0);timeRemaining=g(0);isTimeoutWarning=I(()=>this.timeoutPercent()>0&&this.timeoutPercent()<30);lastHumanTime=Date.now();TIMEOUT_LIMIT_SEC=60;viewportRef;isRecording=I(()=>this.recordingState()!=="IDLE");streamUrl=I(()=>this.isStreaming()?`${S.apiUrl}/cameras/${this.cameraId}/stream?t=${Date.now()}`:"");visibleOverlayData=I(()=>{let e=this.viewMode();if(e==="NONE")return[];let t=this.rawOverlayData();return e==="ALL"?t:t.filter(i=>{let a=i.label||"",r=i.color||"",l=a.includes("Person")||a.includes("Human")||r==="#e74c3c";return e==="HUMAN"?l:e==="QRCODE"?!l:!0})});recordBtnIcon=I(()=>{switch(this.recordingState()){case"MANUAL":return"pi pi-stop-circle";case"AUTO":return"pi pi-stop-circle";default:return"pi pi-video"}});recordBtnTooltip=I(()=>{switch(this.recordingState()){case"MANUAL":return"D\u1EEBng & L\u01B0u";case"AUTO":return"B\u1EAFt bu\u1ED9c d\u1EEBng (Force Stop)";default:return"Ghi h\xECnh th\u1EE7 c\xF4ng"}});viewOptions=[{label:"Kh\xF4ng hi\u1EC3n th\u1ECB",value:"NONE",icon:"pi pi-eye-slash"},{label:"T\u1EA5t c\u1EA3",value:"ALL",icon:"pi pi-eye"},{label:"Ng\u01B0\u1EDDi",value:"HUMAN",icon:"pi pi-user"},{label:"QR Code",value:"QRCODE",icon:"pi pi-qrcode"}];constructor(){_e(()=>{(!this.isStreaming()||this.viewMode()==="NONE")&&this.rawOverlayData.set([])})}ngOnInit(){this.qrCode=this.storageService.getItem("code")?`${this.storageService.getItem("code")}`:"",this.settingsService.getSettings().subscribe({next:e=>{let t=Number(e.camera_width),i=Number(e.camera_height);t&&i&&(console.log(`[Cam ${this.cameraId}] Apply Resolution: ${t}x${i}`),this.imgWidth.set(t),this.imgHeight.set(i))},error:e=>console.warn("Load settings failed, using default 1280x720")}),this.streamService.connectSocket(),this.sub=this.streamService.getCameraStream(this.cameraId).subscribe({next:e=>this.handleMessage(e),error:e=>console.error("Stream Sub Error:",e)}),this.fetchInitialState(),document.addEventListener("fullscreenchange",()=>this.isFullscreen.set(!!document.fullscreenElement)),this.resetControlTimer(),this.startUiLoop()}ngOnDestroy(){this.sub?.unsubscribe(),clearTimeout(this.hideControlsTimer),clearTimeout(this.scanResetTimer),clearTimeout(this.orderInfoResetTimer),clearInterval(this.uiLoopInterval),this.isStreaming()&&this.disconnect()}handleMessage(e){let t=e;if(!(t.cam_id!==void 0&&t.cam_id!=this.cameraId)&&!(e.data&&e.data.cam_id!==void 0&&e.data.cam_id!=this.cameraId))if(e.metadata&&this.rawOverlayData.set(e.metadata),e.event==="QR_SCANNED"||e.event==="BARCODE_DETECTED"){let i=e.data?.code||e.data,a=typeof i=="object"?JSON.stringify(i):String(i);this.scannedCode.set(a),this.isBuffering.set(!0),setTimeout(()=>this.isBuffering.set(!1),1500),clearTimeout(this.scanResetTimer),this.scanResetTimer=setTimeout(()=>this.scannedCode.set(null),5e3)}else if(e.event==="ORDER_CREATED"){console.log(`[Cam ${this.cameraId}] \u{1F7E2} Order Started:`,e.data);let i=e.data&&e.data.order_code?e.data.order_code:e.data.code;this.storageService.setItem("code",i),this.recordingState.set("AUTO"),this.orderCode.set(i||"Auto Order"),this.onHumanDetected()}else e.event==="ORDER_STOPPED"&&(console.log(`[Cam ${this.cameraId}] \u{1F534} Order Stopped`),this.recordingState.set("IDLE"),this.orderCode.set("\u0110\xE3 ho\xE0n th\xE0nh"),this.storageService.removeItem("code"),this.timeoutPercent.set(0),clearTimeout(this.orderInfoResetTimer),this.orderInfoResetTimer=setTimeout(()=>this.orderCode.set(null),3e3))}fetchInitialState(){this.cameraService.getCamera(this.cameraId).subscribe({next:e=>{let t=e.data||e;t&&(t.is_connected?this.isStreaming.set(!0):this.autoConnect&&(console.log(`[Cam ${this.cameraId}] \u{1F50C} Auto Connecting...`),this.toggleConnect()),t.recording_state&&this.recordingState.set(t.recording_state),t.recording_state==="AUTO"?(this.orderCode.set(t.active_order_code||"\u0110ang \u0111\xF3ng g\xF3i"),this.onHumanDetected()):t.recording_state==="MANUAL"&&this.orderCode.set("Th\u1EE7 c\xF4ng"))},error:e=>console.error("Error fetching state:",e)})}toggleConnect(){let e=!this.isStreaming();e&&this.isLoading.set(!0);let t=e?"connect":"disconnect";this.streamService.toggleCamera(this.cameraId,t).subscribe({next:()=>{this.isStreaming.set(e),e||this.isLoading.set(!1),this.resetControlTimer()},error:()=>{this.isLoading.set(!1),this.isStreaming.set(!1),this.messageService.add({severity:"error",summary:"L\u1ED7i",detail:"L\u1ED7i k\u1EBFt n\u1ED1i Camera"})}})}toggleRecording(e){e?.stopPropagation();let t=this.recordingState();if(t==="MANUAL"||t==="AUTO")this.orderCode.set("\u0110ang l\u01B0u..."),this.streamService.stopRecording(this.cameraId).subscribe({next:()=>{this.recordingState.set("IDLE"),this.orderCode.set("\u0110\xE3 l\u01B0u"),setTimeout(()=>this.orderCode.set(null),3e3),this.messageService.add({severity:"success",summary:"OK",detail:"\u0110\xE3 d\u1EEBng ghi h\xECnh."})},error:()=>{this.orderCode.set("L\u1ED7i l\u01B0u"),this.messageService.add({severity:"error",summary:"L\u1ED7i",detail:"Kh\xF4ng th\u1EC3 d\u1EEBng video."})}});else{let i=`MANUAL_${Date.now()}`;this.streamService.startRecording(this.cameraId,i).subscribe({next:()=>{this.recordingState.set("MANUAL"),this.orderCode.set("Th\u1EE7 C\xF4ng"),this.messageService.add({severity:"success",summary:"Start",detail:"B\u1EAFt \u0111\u1EA7u ghi h\xECnh th\u1EE7 c\xF4ng."})},error:()=>this.messageService.add({severity:"error",summary:"L\u1ED7i",detail:"Kh\xF4ng th\u1EC3 b\u1EAFt \u0111\u1EA7u."})})}}startUiLoop(){this.uiLoopInterval=setInterval(()=>{if(this.recordingState()==="AUTO"){let e=Math.max(0,this.TIMEOUT_LIMIT_SEC-(Date.now()-this.lastHumanTime)/1e3);this.timeRemaining.set(Math.floor(e)),this.timeoutPercent.set(e/this.TIMEOUT_LIMIT_SEC*100)}else this.timeoutPercent.set(0)},200)}onHumanDetected(){this.lastHumanTime=Date.now(),this.timeoutPercent.set(100)}onUserInteraction(){this.showControls.set(!0),this.resetControlTimer()}onMouseLeave(){this.isStreaming()&&this.showControls.set(!1)}resetControlTimer(){clearTimeout(this.hideControlsTimer),this.hideControlsTimer=setTimeout(()=>{this.isStreaming()&&this.showControls.set(!1)},2e3)}onViewportClick(e){e.target.closest("p-select, button")||(this.toggleConnect(),this.onUserInteraction())}toggleFullscreen(e){e?.stopPropagation();let t=this.viewportRef.nativeElement;document.fullscreenElement?document.exitFullscreen():t.requestFullscreen()}disconnect(){this.isStreaming.set(!1),this.streamService.toggleCamera(this.cameraId,"disconnect").subscribe()}onImageLoad(e){this.isLoading.set(!1)}onImageError(e){this.isStreaming()&&console.warn(`[Cam ${this.cameraId}] Stream Error (Broken Pipe).`)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=D({type:n,selectors:[["app-camera-widget"]],viewQuery:function(t,i){if(t&1&&ke(dt,5),t&2){let a;Ee(a=Te())&&(i.viewportRef=a.first)}},inputs:{cameraId:"cameraId",cameraName:"cameraName",autoConnect:"autoConnect"},features:[Ne([re])],decls:24,vars:33,consts:[["viewport",""],[1,"camera-card","flex","flex-column","border-round-none","shadow-none","surface-card","h-full",3,"ngClass"],[1,"viewport","group","select-none",3,"mousemove","mouseleave","click"],[1,"loading-layer"],[1,"flex","flex-column","align-items-center","gap-3"],[1,"pi","pi-spin","pi-spinner","text-5xl","text-primary"],[1,"text-gray-300","text-sm"],["class","absolute inset-0 flex flex-column justify-content-center align-items-center z-1",4,"ngIf"],[1,"play-overlay"],[1,"play-btn","shadow-4"],[1,"pi"],[4,"ngIf"],[1,"footer","flex","justify-content-between","align-items-center","px-3","py-2",3,"click"],[1,"mode-selector"],["optionLabel","label","optionValue","value","appendTo","body",3,"onChange","options","ngModel","disabled"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"flex","gap-2"],[1,"p-button","p-button-rounded","p-button-text","text-gray-600","hover:text-primary","hover:bg-gray-100",3,"click","disabled","pTooltip"],[1,"text-xl"],["pTooltip","To\xE0n m\xE0n h\xECnh",1,"p-button","p-button-rounded","p-button-text","text-gray-600","hover:text-primary","hover:bg-gray-100",3,"click","disabled"],["position","top-center",3,"baseZIndex"],[1,"absolute","inset-0","flex","flex-column","justify-content-center","align-items-center","z-1"],[1,"pi","pi-video-slash","text-6xl","text-gray-700","mb-3"],[1,"text-gray-600","font-medium"],[1,"stream-wrapper"],["alt","Stream",3,"load","error","src"],["appVisualizer","",3,"metadata","imgWidth","imgHeight","mode"],["class","flex align-items-center gap-2",4,"ngIf"],[1,"flex","align-items-center","gap-2"],[1,"text-gray-600"],[1,"font-medium","text-sm","text-gray-700"],[1,"text-sm"]],template:function(t,i){if(t&1){let a=E();o(0,"div",1)(1,"div",2,0),C("mousemove",function(){return _(a),x(i.onUserInteraction())})("mouseleave",function(){return _(a),x(i.onMouseLeave())})("click",function(l){return _(a),x(i.onViewportClick(l))}),o(3,"div",3)(4,"div",4),m(5,"i",5),o(6,"span",6),p(7,"\u0110ang k\u1EBFt n\u1ED1i..."),c()()(),v(8,pt,4,0,"div",7),o(9,"div",8)(10,"div",9),m(11,"i",10),c()(),v(12,ut,4,5,"ng-container",11),c(),o(13,"div",12),C("click",function(l){return _(a),x(l.stopPropagation())}),o(14,"div",13)(15,"p-select",14),C("onChange",function(l){return _(a),x(i.viewMode.set(l.value))}),v(16,ft,1,1,"ng-template",15)(17,ht,4,3,"ng-template",16),c()(),o(18,"div",17)(19,"button",18),C("click",function(l){return _(a),x(i.toggleRecording(l))}),m(20,"i",19),c(),o(21,"button",20),C("click",function(l){return _(a),x(i.toggleFullscreen(l))}),m(22,"i",19),c()()()(),m(23,"p-toast",21)}t&2&&(d("ngClass",Ae(28,mt,!i.orderCode()&&!i.isBuffering(),i.isBuffering(),i.orderCode()&&!i.isTimeoutWarning(),i.isTimeoutWarning())),s(),De("aspect-ratio",i.isFullscreen()?"unset":i.aspectRatio()),s(2),M("hidden",!i.isLoading()),s(5),d("ngIf",!i.isStreaming()&&!i.isLoading()),s(),M("opacity-0",i.isStreaming()&&!i.showControls())("opacity-100",!i.isStreaming()||i.showControls()),s(2),M("pi-play",!i.isStreaming())("pi-pause",i.isStreaming()),s(),d("ngIf",i.isStreaming()),s(3),d("options",i.viewOptions)("ngModel",i.viewMode())("disabled",!i.isStreaming()),s(4),M("text-red-500",i.isRecording()),d("disabled",!i.isStreaming())("pTooltip",i.recordBtnTooltip()),s(),F(i.recordBtnIcon()),s(),d("disabled",!i.isStreaming()),s(),F(i.isFullscreen()?"pi pi-compress":"pi pi-expand"),s(),d("baseZIndex",99999))},dependencies:[L,Fe,N,G,ze,Be,He,tt,et,je,z,H,Ye,Ze],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;width:100%;height:100%}.camera-card[_ngcontent-%COMP%]{position:relative;width:100%;height:auto;border-radius:6px;overflow:hidden;background:#fff;box-shadow:0 10px 30px #0000004d;transition:box-shadow .3s ease}.camera-card.status-idle[_ngcontent-%COMP%]{box-shadow:0 4px 20px #0003}.camera-card.status-recording[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #2ecc71,0 0 20px #2ecc7166}.camera-card.status-warning[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #e74c3c,0 0 20px #e74c3c66}.camera-header[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;padding:12px 16px;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(to bottom,#000c,#0000);z-index:20;pointer-events:none}.camera-header[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:#666}.camera-header[_ngcontent-%COMP%]   .status-dot.online[_ngcontent-%COMP%]{background:#2ecc71;box-shadow:0 0 8px #2ecc71}.camera-header[_ngcontent-%COMP%]   .camera-name[_ngcontent-%COMP%]{color:#fff;font-weight:600;text-shadow:0 1px 2px rgba(0,0,0,.5);font-size:.95rem}.camera-header[_ngcontent-%COMP%]   .res-badge[_ngcontent-%COMP%]{background:#fff3;color:#ddd;font-size:.7rem;padding:2px 6px;border-radius:4px}.viewport[_ngcontent-%COMP%]{width:100%;height:auto;background:#000;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center}.viewport[_ngcontent-%COMP%]:fullscreen{width:100vw!important;height:100vh!important}.viewport[_ngcontent-%COMP%]:fullscreen   .stream-wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.viewport[_ngcontent-%COMP%]:fullscreen   .stream-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain}.stream-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;justify-content:center;align-items:center}.stream-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.stream-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;pointer-events:none}.loading-layer[_ngcontent-%COMP%]{position:absolute;inset:0;background:#111;z-index:10;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#888}.play-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:15;display:flex;align-items:center;justify-content:center;background:#0000004d;opacity:0;transition:opacity .3s;pointer-events:none}.play-overlay.visible[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.play-overlay[_ngcontent-%COMP%]   .play-btn[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;background:#ffffff26;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,.3);color:#fff;font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.play-overlay[_ngcontent-%COMP%]   .play-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#ffffff4d}@keyframes _ngcontent-%COMP%_pulse-opacity{0%,to{opacity:1}50%{opacity:.5}}[_nghost-%COMP%]     .p-select{border:none;background:transparent}[_nghost-%COMP%]     .p-select .p-select-label{padding:.5rem;color:#374151;font-weight:500}[_nghost-%COMP%]     .p-select .p-select-dropdown{color:#6b7280}[_nghost-%COMP%]     .p-select:hover{background:#f3f4f6;border-radius:6px}.footer[_ngcontent-%COMP%]{background-color:#c7c7c748}'],changeDetection:0})};var Z=class n{transform(e){if(!e)return"";try{return $e(e,"hh:mm a","en-US")}catch{return console.warn("TimeFormatPipe Error:",e),String(e)}}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=Oe({name:"appTimeFormat",type:n,pure:!0})};var vt=()=>({width:"100%",height:"100%"});function bt(n,e){if(n&1){let t=E();o(0,"button",28),C("click",function(){let a=_(t).$implicit,r=h();return x(r.selectCamera(a))}),m(1,"i",29),p(2),c()}if(n&2){let t,i,a,r=e.$implicit,l=h();M("p-button-outlined",((t=l.selectedCamera())==null?null:t.id)!==r.id)("p-button-primary",((i=l.selectedCamera())==null?null:i.id)===r.id)("p-button-secondary",((a=l.selectedCamera())==null?null:a.id)!==r.id),s(2),y(" ",r.display_name," ")}}function _t(n,e){if(n&1&&m(0,"app-camera-widget",30),n&2){let t=h();d("cameraId",t.selectedCamera().id)("cameraName",t.selectedCamera().display_name||t.selectedCamera().name)("autoConnect",!0)}}function xt(n,e){n&1&&(o(0,"div",31),m(1,"i",32),o(2,"p",33),p(3,"Ch\u01B0a c\xF3 \u0111\u01A1n h\xE0ng n\xE0o"),c()())}function yt(n,e){if(n&1&&m(0,"img",45),n&2){let t=h().$implicit;d("src",t.avatar,$)}}function Ct(n,e){n&1&&(o(0,"div",46),m(1,"i",47),c())}function St(n,e){if(n&1&&(o(0,"span",48),m(1,"i",49),p(2),ie(3,"appTimeFormat"),c()),n&2){let t=h().$implicit;s(2),y(" ",ne(3,1,t.start_time)," ")}}function wt(n,e){if(n&1&&(o(0,"div",50),m(1,"i",51),p(2),c()),n&2){let t=h().$implicit;s(2),y(" ",t.note," ")}}function Ot(n,e){if(n&1){let t=E();o(0,"div",34),C("click",function(){let a=_(t).$implicit,r=h();return x(r.selectCamera({id:a.camera_id,name:a.camera_name}))}),o(1,"div",35),v(2,yt,1,1,"img",36)(3,Ct,2,0,"div",37),c(),o(4,"div",38)(5,"div",39),p(6),c(),o(7,"div",40)(8,"span",41),m(9,"i",42),p(10),c(),v(11,St,4,3,"span",43),c(),v(12,wt,3,1,"div",44),c()()}if(n&2){let t=e.$implicit;s(2),d("ngIf",t.avatar),s(),d("ngIf",!t.avatar),s(3),y(" ",t.code," "),s(4),y(" ",t.camera_name," "),s(),d("ngIf",t.start_time),s(),d("ngIf",t.note)}}function Mt(n,e){n&1&&(o(0,"div",52),m(1,"i",53),o(2,"p",54),p(3,"T\u1EA5t c\u1EA3 c\xE1c line \u0111ang ch\u1EDD..."),c()())}function It(n,e){if(n&1&&m(0,"img",68),n&2){let t=h().$implicit;d("src",t.avatar,$)}}function kt(n,e){n&1&&(o(0,"div",46),m(1,"i",69),c())}function Et(n,e){if(n&1&&(o(0,"span",48),m(1,"i",49),p(2),ie(3,"appTimeFormat"),c()),n&2){let t=h().$implicit;s(2),y(" ",ne(3,1,t.start_time)," ")}}function Tt(n,e){if(n&1&&(o(0,"div",70),m(1,"i",51),p(2),c()),n&2){let t=h().$implicit;d("title",t.note),s(2),y(" ",t.note," ")}}function Dt(n,e){if(n&1){let t=E();o(0,"div",55),C("click",function(){let a=_(t).$implicit,r=h();return x(r.selectCamera({id:a.camera_id,name:a.camera_name}))}),o(1,"div",56)(2,"span",57),m(3,"i",58),p(4),c(),o(5,"span",59),p(6," PACKING "),c()(),o(7,"div",60)(8,"div",61),v(9,It,1,1,"img",62)(10,kt,2,0,"div",37),c(),o(11,"div",63)(12,"div",64),p(13),c(),o(14,"div",65)(15,"span",66),p(16),c(),v(17,Et,4,3,"span",43),c(),v(18,Tt,3,2,"div",67),c()()()}if(n&2){let t=e.$implicit;s(4),y(" ",t.camera_name," "),s(5),d("ngIf",t.avatar),s(),d("ngIf",!t.avatar),s(2),d("title",t.code),s(),y(" ",t.code," "),s(3),y("ID: #",t.order_id),s(),d("ngIf",t.start_time),s(),d("ngIf",t.note)}}var rt=class n{cameraService=f(Q);streamService=f(k);storageService=f(B);orderService=f(Ge);zone=f(be);cdr=f(Re);cameras=g([]);selectedCamera=g(null);isLoading=g(!1);activePackingOrders=g([]);isListLoading=g(!1);sub=null;ngOnInit(){let e=this.storageService.getItem(S.ACCESS_TOKEN_KEY)||"";this.streamService.connectSocket(e),this.loadCameras(),this.loadInitialActiveOrders(),this.sub=this.streamService.messages$.subscribe(t=>{this.zone.run(()=>{this.handleSocketMessage(t)})})}ngOnDestroy(){this.sub?.unsubscribe(),this.streamService.disconnectSocket()}trackByOrder(e,t){return t.order_id}loadCameras(){this.cameraService.getAllCameras().subscribe(e=>{let t=[];Array.isArray(e.data)?t=e.data:e.data&&Array.isArray(e.data.items)?t=e.data.items:t=e.data?[e.data]:[];let i=t.map(a=>(a.display_name=a.display_name?a.display_name:a.name,a));this.cameras.set(i),!this.selectedCamera()&&i.length>0&&this.selectCamera(i[0])})}loadInitialActiveOrders(){this.isListLoading.set(!0),this.fetchOrders(!0)}reloadListSilent(){this.fetchOrders(!1)}fetchOrders(e){this.orderService.getOrders({status:"packing",limit:100,sort_by:"created_at",sort_dir:"desc"}).subscribe({next:t=>{let a=(t.data?.items||[]).map(u=>({camera_id:u.camera_id,camera_name:this.getCameraName(u.camera_id),code:u.code,order_id:u.id,start_time:u.created_at,avatar:this.resolveAvatar(u.path_avatar||u.full_avatar_path),note:u.note})),r=JSON.stringify(this.activePackingOrders()),l=JSON.stringify(a);r!==l&&(this.activePackingOrders.set(a),this.cdr.detectChanges()),e&&this.isListLoading.set(!1)},error:t=>{console.error("L\u1ED7i t\u1EA3i \u0111\u01A1n h\xE0ng:",t),e&&this.isListLoading.set(!1)}})}selectCamera(e){let t=this.selectedCamera();t&&t.id===e.id||(this.selectedCamera.set(null),this.isLoading.set(!0),setTimeout(()=>{this.selectedCamera.set(e),this.isLoading.set(!1)},50))}handleSocketMessage(e){if(!e||!e.event)return;let t=e.payload||e.data||{};if(e.event==="ORDER_CREATED"){let i={camera_id:t.cam_id,camera_name:this.getCameraName(t.cam_id),code:t.code,order_id:t.order_id,start_time:new Date(t.start_time).toISOString(),note:t.note,avatar:null};this.activePackingOrders.update(a=>a.some(r=>r.code===i.code)?a:[i,...a])}else if(e.event==="ORDER_STOPPED"){let i=t.code;i?this.activePackingOrders.update(a=>a.filter(r=>r.code!==i)):this.reloadListSilent()}else if(e.event==="ORDER_UPDATED"){let i=t.order_id,a=t.path_avatar;i&&a&&this.activePackingOrders.update(r=>r.map(l=>l.order_id===i?se(oe({},l),{avatar:this.resolveAvatar(a)}):l))}}getCameraName(e){let t=this.cameras().find(i=>i.id==e);return t?t.display_name||t.name:`Cam ${e}`}resolveAvatar(e){if(!e)return null;if(e.startsWith("http"))return e;let t=e.startsWith("/")?e.substring(1):e;return`${S.apiUrl.endsWith("/")?S.apiUrl.slice(0,-1):S.apiUrl}/${t}`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=D({type:n,selectors:[["app-monitor"]],decls:36,vars:15,consts:[[1,"monitor-layout","h-screen","flex","flex-column","md:flex-row","overflow-hidden"],[1,"mobile-stats-header","block","md:hidden","p-2"],[1,"main-area","flex-1","flex","flex-column","relative","min-w-0","min-h-0"],[1,"camera-selector","p-2","flex","gap-2","overflow-x-auto","border-bottom-1","border-gray-800","flex-shrink-0"],["class","p-button p-component p-button-sm white-space-nowrap",3,"p-button-outlined","p-button-primary","p-button-secondary","click",4,"ngFor","ngForOf"],[1,"video-container","flex-1","flex","align-items-center","justify-content-center","overflow-hidden","min-h-0","relative"],["class","w-full h-full block",3,"cameraId","cameraName","autoConnect",4,"ngIf"],[1,"mobile-order-list","block","md:hidden","h-18rem","bg-gray-50","border-top-1","border-gray-300","flex","flex-column","shadow-2","z-2"],[1,"p-2","flex","justify-content-between","align-items-center","bg-white","border-bottom-1","border-gray-200","flex-shrink-0"],[1,"flex","align-items-center","gap-2"],[1,"font-bold","text-gray-700","text-sm","uppercase"],[1,"bg-red-500","text-white","text-xs","px-2","py-1","border-round","font-bold"],["pButton","","icon","pi pi-refresh",1,"p-button-rounded","p-button-text","p-button-sm","p-button-secondary","w-2rem","h-2rem",3,"click","loading"],[1,"flex-1","overflow-y-auto","p-2","custom-scroll"],["class","text-center py-4 text-gray-400",4,"ngIf"],["class","active-card surface-card p-2 mb-2 border-round shadow-1 border-1 border-transparent flex gap-3 align-items-start active:bg-blue-50",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"right-sidebar","hidden","md:flex","flex-column","w-20rem","xl:w-24rem","surface-section","border-left-1","border-gray-700","shadow-4","z-2"],[1,"sidebar-header","p-3","border-bottom-1","border-gray-200"],[1,"text-gray-600","text-sm","font-bold","uppercase","mb-3","ml-1"],[1,"sidebar-content","flex-1","flex","flex-column","min-h-0","bg-gray-50"],[1,"p-3","pb-2","flex","align-items-center","justify-content-between"],[1,"text-red-500","text-sm","font-bold","uppercase","m-0","flex","align-items-center","gap-2"],[1,"bg-red-500","text-white","text-xs","px-2","py-1","border-round"],["pButton","","icon","pi pi-refresh","pTooltip","L\xE0m m\u1EDBi",1,"p-button-rounded","p-button-text","p-button-sm","p-button-secondary",3,"click","loading"],["styleClass","custom-scroll"],[1,"p-3","flex","flex-column","gap-3"],["class","text-center py-6 text-gray-400",4,"ngIf"],["class","active-card surface-card p-3 border-round-xl shadow-1 border-1 border-transparent hover:border-blue-500 cursor-pointer transition-all transition-duration-200",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-button","p-component","p-button-sm","white-space-nowrap",3,"click"],[1,"pi","pi-video","mr-2"],[1,"w-full","h-full","block",3,"cameraId","cameraName","autoConnect"],[1,"text-center","py-4","text-gray-400"],[1,"pi","pi-box","text-3xl","mb-2","opacity-50"],[1,"m-0","text-xs"],[1,"active-card","surface-card","p-2","mb-2","border-round","shadow-1","border-1","border-transparent","flex","gap-3","align-items-start","active:bg-blue-50",3,"click"],[1,"w-3rem","h-3rem","border-round","bg-gray-200","overflow-hidden","relative","flex-shrink-0","border-1","border-gray-300","mt-1"],["class","w-full h-full object-cover",3,"src",4,"ngIf"],["class","absolute inset-0 flex align-items-center justify-content-center text-gray-400",4,"ngIf"],[1,"flex-1","min-w-0"],[1,"font-bold","text-900","text-sm","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"flex","align-items-center","gap-2","mt-1"],[1,"text-xs","text-gray-500","flex","align-items-center"],[1,"pi","pi-video","mr-1","text-xs"],["class","text-xs text-blue-600 flex align-items-center",4,"ngIf"],["class","text-xs text-orange-600 mt-1 white-space-nowrap overflow-hidden text-overflow-ellipsis",4,"ngIf"],[1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","flex","align-items-center","justify-content-center","text-gray-400"],[1,"pi","pi-image"],[1,"text-xs","text-blue-600","flex","align-items-center"],[1,"pi","pi-clock","mr-1","text-xs"],[1,"text-xs","text-orange-600","mt-1","white-space-nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"pi","pi-tag","mr-1","text-xs"],[1,"text-center","py-6","text-gray-400"],[1,"pi","pi-box","text-5xl","mb-3","opacity-50"],[1,"m-0"],[1,"active-card","surface-card","p-3","border-round-xl","shadow-1","border-1","border-transparent","hover:border-blue-500","cursor-pointer","transition-all","transition-duration-200",3,"click"],[1,"flex","justify-content-between","align-items-center","mb-2"],[1,"text-xs","font-bold","text-gray-500","flex","align-items-center"],[1,"pi","pi-video","mr-1"],[1,"text-xs","bg-green-100","text-green-600","font-bold","px-2","py-1","border-round"],[1,"flex","gap-3"],[1,"w-4rem","h-4rem","border-round-lg","bg-gray-200","overflow-hidden","flex-shrink-0","relative","shadow-1"],["class","w-full h-full object-cover animate-fade-in","onError","this.style.display='none'",3,"src",4,"ngIf"],[1,"flex-1","min-w-0","flex","flex-column","justify-content-center"],[1,"font-bold","text-lg","text-900","white-space-nowrap","overflow-hidden","text-overflow-ellipsis","mb-1",3,"title"],[1,"flex","flex-wrap","gap-2","align-items-center"],[1,"text-xs","text-gray-500"],["class","text-xs text-orange-600 mt-1 white-space-nowrap overflow-hidden text-overflow-ellipsis",3,"title",4,"ngIf"],["onError","this.style.display='none'",1,"w-full","h-full","object-cover","animate-fade-in",3,"src"],[1,"pi","pi-image","text-xl"],[1,"text-xs","text-orange-600","mt-1","white-space-nowrap","overflow-hidden","text-overflow-ellipsis",3,"title"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1),m(2,"app-activity-stats"),c(),o(3,"div",2)(4,"div",3),v(5,bt,3,7,"button",4),c(),o(6,"div",5),v(7,_t,1,3,"app-camera-widget",6),c()(),o(8,"div",7)(9,"div",8)(10,"div",9)(11,"span",10),p(12,"\u{1F534} \u0110ang \u0111\xF3ng g\xF3i"),c(),o(13,"span",11),p(14),c()(),o(15,"button",12),C("click",function(){return i.loadInitialActiveOrders()}),c()(),o(16,"div",13),v(17,xt,4,0,"div",14)(18,Ot,13,6,"div",15),c()(),o(19,"div",16)(20,"div",17)(21,"h3",18),p(22,"T\u1ED5ng quan h\xF4m nay"),c(),m(23,"app-activity-stats"),c(),o(24,"div",19)(25,"div",20)(26,"h3",21)(27,"span"),p(28,"\u{1F534} \u0110ang \u0111\xF3ng g\xF3i"),c(),o(29,"span",22),p(30),c()(),o(31,"button",23),C("click",function(){return i.loadInitialActiveOrders()}),c()(),o(32,"p-scrollPanel",24)(33,"div",25),v(34,Mt,4,0,"div",26)(35,Dt,19,8,"div",27),c()()()()()),t&2&&(s(5),d("ngForOf",i.cameras()),s(2),d("ngIf",i.selectedCamera()),s(7),P(i.activePackingOrders().length),s(),d("loading",i.isListLoading()),s(2),d("ngIf",i.activePackingOrders().length===0),s(),d("ngForOf",i.activePackingOrders())("ngForTrackBy",i.trackByOrder),s(12),P(i.activePackingOrders().length),s(),d("loading",i.isListLoading()),s(),Pe(Le(14,vt)),s(2),d("ngIf",i.activePackingOrders().length===0),s(),d("ngForOf",i.activePackingOrders())("ngForTrackBy",i.trackByOrder))},dependencies:[L,Ue,N,X,q,Ke,Qe,z,H,qe,Je,Z],styles:["[_nghost-%COMP%]{display:block}  .custom-scroll .p-scrollpanel-bar{background-color:#fff3}.monitor-layout[_ngcontent-%COMP%]{background-color:transparent}.active-card[_ngcontent-%COMP%]{transition:transform .2s}.active-card[_ngcontent-%COMP%]:hover{transform:translate(4px);background-color:#334155}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@media screen and (max-width:768px){.monitor-layout[_ngcontent-%COMP%]{flex-direction:column}.h-screen[_ngcontent-%COMP%]{height:auto!important}  .mobile-stats-header app-activity-stats>div,   .mobile-stats-header .grid{display:flex!important;flex-direction:row!important;flex-wrap:nowrap!important;overflow-x:auto!important;gap:10px}  .mobile-stats-header app-activity-stats>div>div,   .mobile-stats-header app-activity-stats>div .col-12,   .mobile-stats-header app-activity-stats>div .col-6,   .mobile-stats-header .grid>div,   .mobile-stats-header .grid .col-12,   .mobile-stats-header .grid .col-6{flex:0 0 auto!important;width:auto!important;min-width:45%}.main-area[_ngcontent-%COMP%]{height:100%}.video-container[_ngcontent-%COMP%]{background-color:transparent}}@media screen and (min-width:769px){.main-area[_ngcontent-%COMP%]{height:calc(100% - 100px)}}.camera-selector[_ngcontent-%COMP%]{background-color:#c7c7c748}"]})};export{rt as MonitorComponent};
