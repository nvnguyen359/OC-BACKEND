import{b as Nt,d as zt,e as $t,f as Rt,g as Ut,h as jt,i as qt,l as Ue,m as je,p as le,q as pe,r as We}from"./chunk-GNNALHZT.js";import{a as Ht,b as At,c as Wt,d as Qt}from"./chunk-4ISLJ2EC.js";import{b as Et,c as Lt,f as Pt,i as Ft,j as Bt}from"./chunk-DPVRLWCX.js";import"./chunk-W7NCV7QP.js";import{c as Ce}from"./chunk-Y6IHSAR2.js";import{c as ue,f as gt,g as _t,h as ft,j as Ne}from"./chunk-FMY5LH6L.js";import"./chunk-GFRJEQFL.js";import{b as Vt,c as W}from"./chunk-GUACCTIK.js";import{$a as rt,$b as Ee,Bb as f,Cb as p,Fb as st,Fc as mt,Gb as lt,Gc as ut,Ge as It,Ha as Q,Hb as L,Hc as ie,Ia as de,Ib as V,Ic as He,Id as yt,Ie as Dt,Jb as pt,Jc as Ae,Kb as dt,La as l,Lb as P,Lc as B,Le as he,Nb as De,Ne as xe,O as Xe,Ob as F,Oe as j,P as Ye,Pb as w,Pc as oe,Pd as Ct,Pe as kt,Q as Je,Qb as h,Qe as be,Rb as te,S as et,Sb as I,Sd as fe,Se as ye,Ta as Y,Td as se,U as S,Ub as $,Vb as R,Wb as U,Wd as vt,Ya as E,Yb as ke,Yd as Z,Z as m,Za as ot,Zb as N,_ as u,_b as q,a as k,ab as at,ac as ct,b as Ge,bb as Ie,bd as ht,be as wt,cb as _,cd as ze,dd as xt,de as Tt,ea as O,fc as Le,fd as ge,gc as Ve,ia as b,ib as y,ic as ne,id as re,jd as _e,kc as K,kd as ae,la as tt,lb as C,ma as nt,mb as v,nb as J,nc as z,ob as ee,oc as Pe,oe as Mt,pb as s,qb as d,qe as St,rb as c,re as $e,sa as it,sb as g,sc as Fe,se as G,tc as Be,te as Re,vd as bt,wb as ce,xb as me,yb as A,zb as T,ze as Ot}from"./chunk-T55JMWX5.js";var Kt=`
    .p-menu {
        background: dt('menu.background');
        color: dt('menu.color');
        border: 1px solid dt('menu.border.color');
        border-radius: dt('menu.border.radius');
        min-width: 12.5rem;
    }

    .p-menu-list {
        margin: 0;
        padding: dt('menu.list.padding');
        outline: 0 none;
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: dt('menu.list.gap');
    }

    .p-menu-item-content {
        transition:
            background dt('menu.transition.duration'),
            color dt('menu.transition.duration');
        border-radius: dt('menu.item.border.radius');
        color: dt('menu.item.color');
        overflow: hidden;
    }

    .p-menu-item-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        text-decoration: none;
        overflow: hidden;
        position: relative;
        color: inherit;
        padding: dt('menu.item.padding');
        gap: dt('menu.item.gap');
        user-select: none;
        outline: 0 none;
    }

    .p-menu-item-label {
        line-height: 1;
    }

    .p-menu-item-icon {
        color: dt('menu.item.icon.color');
    }

    .p-menu-item.p-focus .p-menu-item-content {
        color: dt('menu.item.focus.color');
        background: dt('menu.item.focus.background');
    }

    .p-menu-item.p-focus .p-menu-item-icon {
        color: dt('menu.item.icon.focus.color');
    }

    .p-menu-item:not(.p-disabled) .p-menu-item-content:hover {
        color: dt('menu.item.focus.color');
        background: dt('menu.item.focus.background');
    }

    .p-menu-item:not(.p-disabled) .p-menu-item-content:hover .p-menu-item-icon {
        color: dt('menu.item.icon.focus.color');
    }

    .p-menu-overlay {
        box-shadow: dt('menu.shadow');
    }

    .p-menu-submenu-label {
        background: dt('menu.submenu.label.background');
        padding: dt('menu.submenu.label.padding');
        color: dt('menu.submenu.label.color');
        font-weight: dt('menu.submenu.label.font.weight');
    }

    .p-menu-separator {
        border-block-start: 1px solid dt('menu.separator.border.color');
    }
`;var sn=["pMenuItemContent",""],we=t=>({$implicit:t}),ln=()=>({exact:!1}),pn=t=>({item:t});function dn(t,i){t&1&&A(0)}function cn(t,i){if(t&1&&(d(0,"a",6),_(1,dn,1,0,"ng-container",7),c()),t&2){let e=p(2),n=P(4);w(e.cn(e.cx("itemLink"),e.item==null?null:e.item.linkClass)),s("ngStyle",e.item==null?null:e.item.linkStyle)("target",e.item.target)("pBind",e.getPTOptions("itemLink")),y("title",e.item.title)("href",e.item.url||null,de)("data-automationid",e.item.automationId)("tabindex",-1),l(),s("ngTemplateOutlet",n)("ngTemplateOutletContext",q(11,we,e.item))}}function mn(t,i){t&1&&A(0)}function un(t,i){if(t&1&&(d(0,"a",8),_(1,mn,1,0,"ng-container",7),c()),t&2){let e=p(2),n=P(4);w(e.cn(e.cx("itemLink"),e.item==null?null:e.item.linkClass)),s("routerLink",e.item.routerLink)("queryParams",e.item.queryParams)("routerLinkActiveOptions",e.item.routerLinkActiveOptions||N(19,ln))("ngStyle",e.item==null?null:e.item.linkStyle)("target",e.item.target)("fragment",e.item.fragment)("queryParamsHandling",e.item.queryParamsHandling)("preserveFragment",e.item.preserveFragment)("skipLocationChange",e.item.skipLocationChange)("replaceUrl",e.item.replaceUrl)("state",e.item.state)("pBind",e.getPTOptions("itemLink")),y("data-automationid",e.item.automationId)("tabindex",-1)("title",e.item.title),l(),s("ngTemplateOutlet",n)("ngTemplateOutletContext",q(20,we,e.item))}}function gn(t,i){if(t&1&&(ce(0),_(1,cn,2,13,"a",4)(2,un,2,22,"a",5),me()),t&2){let e=p();l(),s("ngIf",!(e.item!=null&&e.item.routerLink)),l(),s("ngIf",e.item==null?null:e.item.routerLink)}}function _n(t,i){}function fn(t,i){t&1&&_(0,_n,0,0,"ng-template")}function hn(t,i){if(t&1&&(ce(0),_(1,fn,1,0,null,7),me()),t&2){let e=p();l(),s("ngTemplateOutlet",e.itemTemplate)("ngTemplateOutletContext",q(2,we,e.item))}}function xn(t,i){if(t&1&&g(0,"span",12),t&2){let e=p(2);w(e.cn(e.cx("itemIcon",q(5,pn,e.item)),e.item.iconClass)),s("pBind",e.getPTOptions("itemIcon"))("ngStyle",e.item.iconStyle),y("data-pc-section","itemicon")}}function bn(t,i){if(t&1&&(d(0,"span",13),h(1),c()),t&2){let e=p(2);w(e.cn(e.cx("itemLabel"),e.item.labelClass)),s("ngStyle",e.item.labelStyle)("pBind",e.getPTOptions("itemLabel")),y("data-pc-section","itemlabel"),l(),te(e.item.label)}}function yn(t,i){if(t&1&&(g(0,"span",14),Le(1,"safeHtml")),t&2){let e=p(2);w(e.cn(e.cx("itemLabel"),e.item.labelClass)),s("ngStyle",e.item.labelStyle)("innerHTML",Ve(1,6,e.item.label),Q)("pBind",e.getPTOptions("itemLabel")),y("data-pc-section","itemlabel")}}function Cn(t,i){if(t&1&&g(0,"p-badge",15),t&2){let e=p(2);s("styleClass",e.item.badgeStyleClass)("value",e.item.badge)("pt",e.getPTOptions("pcBadge"))("unstyled",e.unstyled())}}function vn(t,i){if(t&1&&_(0,xn,1,7,"span",9)(1,bn,2,6,"span",10)(2,yn,2,8,"ng-template",null,1,ne)(4,Cn,1,4,"p-badge",11),t&2){let e=P(3),n=p();s("ngIf",n.item.icon),l(),s("ngIf",n.item.escape!==!1)("ngIfElse",e),l(3),s("ngIf",n.item.badge)}}var wn=["start"],Tn=["end"],Mn=["header"],Sn=["item"],On=["submenuheader"],In=["list"],Dn=["container"],Xt=(t,i)=>({item:t,id:i});function kn(t,i){t&1&&A(0)}function En(t,i){if(t&1){let e=T();d(0,"p-motion",5),f("onBeforeEnter",function(o){m(e);let r=p();return u(r.onOverlayBeforeEnter(o))})("onAfterLeave",function(){m(e);let o=p();return u(o.onOverlayAfterLeave())}),_(1,kn,1,0,"ng-container",6),c()}if(t&2){let e=p(),n=P(3);s("visible",e.visible)("appear",e.popup)("options",e.computedMotionOptions()),l(),s("ngTemplateOutlet",n)}}function Ln(t,i){t&1&&A(0)}function Vn(t,i){if(t&1&&_(0,Ln,1,0,"ng-container",6),t&2){p();let e=P(3);s("ngTemplateOutlet",e)}}function Pn(t,i){t&1&&A(0)}function Fn(t,i){if(t&1&&(d(0,"div",11),_(1,Pn,1,0,"ng-container",6),c()),t&2){let e=p(2);w(e.cx("start")),s("pBind",e.ptm("start")),y("data-pc-section","start"),l(),s("ngTemplateOutlet",e.startTemplate??e._startTemplate)}}function Bn(t,i){if(t&1&&g(0,"li",15),t&2){let e=p(4);w(e.cx("separator")),s("pBind",e.ptm("separator")),y("data-pc-section","separator")}}function Hn(t,i){if(t&1&&(d(0,"span"),h(1),c()),t&2){let e=p(3).$implicit;l(),te(e.label)}}function An(t,i){if(t&1&&(g(0,"span",19),Le(1,"safeHtml")),t&2){let e=p(3).$implicit;s("innerHTML",Ve(1,1,e.label),Q)}}function Nn(t,i){if(t&1&&(ce(0),_(1,Hn,2,1,"span",18)(2,An,2,3,"ng-template",null,3,ne),me()),t&2){let e=P(3),n=p(2).$implicit;l(),s("ngIf",n.escape!==!1)("ngIfElse",e)}}function zn(t,i){t&1&&A(0)}function $n(t,i){if(t&1&&(d(0,"li",16),_(1,Nn,4,2,"ng-container",10)(2,zn,1,0,"ng-container",17),c()),t&2){let e=p(),n=e.$implicit,o=e.index,r=p(3);w(r.cx("submenuLabel")),s("pBind",r.ptm("submenuLabel"))("tooltipOptions",n.tooltipOptions)("pTooltipUnstyled",r.unstyled()),y("data-automationid",n.automationId)("id",r.menuitemId(n,r.id,o))("data-pc-section","submenulabel"),l(),s("ngIf",!r.submenuHeaderTemplate&&!r._submenuHeaderTemplate),l(),s("ngTemplateOutlet",r.submenuHeaderTemplate??r._submenuHeaderTemplate)("ngTemplateOutletContext",q(11,we,n))}}function Rn(t,i){if(t&1&&g(0,"li",15),t&2){let e=p(5);w(e.cx("separator")),s("pBind",e.ptm("separator")),y("data-pc-section","separator")}}function Un(t,i){if(t&1){let e=T();d(0,"li",21),f("onMenuItemClick",function(o){m(e);let r=p(),a=r.$implicit,x=r.index,M=p().index,H=p(3);return u(H.itemClick(o,H.menuitemId(a,H.id,M,x)))}),c()}if(t&2){let e=p(),n=e.$implicit,o=e.index,r=p().index,a=p(3);F(n.style),w(a.cn(a.cx("item",Ee(17,Xt,n,a.menuitemId(n,a.id,r,o))),n==null?null:n.styleClass)),s("pMenuItemContent",n)("itemTemplate",a.itemTemplate??a._itemTemplate)("idx",o)("menuitemId",a.menuitemId(n,a.id,r,o))("tooltipOptions",n.tooltipOptions)("pTooltipUnstyled",a.unstyled())("unstyled",a.unstyled()),y("data-pc-section","menuitem")("aria-label",a.label(n.label))("data-p-focused",a.isItemFocused(a.menuitemId(n,a.id,r,o)))("data-p-disabled",a.disabled(n.disabled))("aria-disabled",a.disabled(n.disabled))("id",a.menuitemId(n,a.id,r,o))}}function jn(t,i){if(t&1&&_(0,Rn,1,4,"li",13)(1,Un,1,20,"li",20),t&2){let e=i.$implicit,n=p().$implicit;s("ngIf",e.separator&&(e.visible!==!1||n.visible!==!1)),l(),s("ngIf",!e.separator&&e.visible!==!1&&(e.visible!==void 0||n.visible!==!1))}}function Wn(t,i){if(t&1&&_(0,Bn,1,4,"li",13)(1,$n,3,13,"li",14)(2,jn,2,2,"ng-template",12),t&2){let e=i.$implicit;s("ngIf",e.separator&&e.visible!==!1),l(),s("ngIf",!e.separator),l(),s("ngForOf",e.items)}}function Qn(t,i){if(t&1&&_(0,Wn,3,3,"ng-template",12),t&2){let e=p(2);s("ngForOf",e.model)}}function qn(t,i){if(t&1&&g(0,"li",15),t&2){let e=p(4);w(e.cx("separator")),s("pBind",e.ptm("separator")),y("data-pc-section","separator")}}function Kn(t,i){if(t&1){let e=T();d(0,"li",23),f("onMenuItemClick",function(o){m(e);let r=p(),a=r.$implicit,x=r.index,M=p(3);return u(M.itemClick(o,M.menuitemId(a,M.id,x)))}),c()}if(t&2){let e=p(),n=e.$implicit,o=e.index,r=p(3);w(r.cn(r.cx("item",Ee(16,Xt,n,r.menuitemId(n,r.id,o))),n==null?null:n.styleClass)),s("pMenuItemContent",n)("itemTemplate",r.itemTemplate??r._itemTemplate)("idx",o)("menuitemId",r.menuitemId(n,r.id,o))("ngStyle",n.style)("tooltipOptions",n.tooltipOptions)("unstyled",r.unstyled())("pTooltipUnstyled",r.unstyled()),y("data-pc-section","menuitem")("aria-label",r.label(n.label))("data-p-focused",r.isItemFocused(r.menuitemId(n,r.id,o)))("data-p-disabled",r.disabled(n.disabled))("aria-disabled",r.disabled(n.disabled))("id",r.menuitemId(n,r.id,o))}}function Zn(t,i){if(t&1&&_(0,qn,1,4,"li",13)(1,Kn,1,19,"li",22),t&2){let e=i.$implicit;s("ngIf",e.separator&&e.visible!==!1),l(),s("ngIf",!e.separator&&e.visible!==!1)}}function Gn(t,i){if(t&1&&_(0,Zn,2,2,"ng-template",12),t&2){let e=p(2);s("ngForOf",e.model)}}function Xn(t,i){t&1&&A(0)}function Yn(t,i){if(t&1&&(d(0,"div",11),_(1,Xn,1,0,"ng-container",6),c()),t&2){let e=p(2);w(e.cx("end")),s("pBind",e.ptm("end")),y("data-pc-section","end"),l(),s("ngTemplateOutlet",e.endTemplate??e._endTemplate)}}function Jn(t,i){if(t&1){let e=T();d(0,"div",7,1),f("click",function(o){m(e);let r=p();return u(r.onOverlayClick(o))}),_(2,Fn,2,5,"div",8),d(3,"ul",9,2),f("focus",function(o){m(e);let r=p();return u(r.onListFocus(o))})("blur",function(o){m(e);let r=p();return u(r.onListBlur(o))})("keydown",function(o){m(e);let r=p();return u(r.onListKeyDown(o))}),_(5,Qn,1,1,null,10)(6,Gn,1,1,null,10),c(),_(7,Yn,2,5,"div",8),c()}if(t&2){let e=p();F(e.sx("root")),w(e.cn(e.cx("root"),e.styleClass)),s("ngStyle",e.style)("pBind",e.ptm("root")),y("id",e.id)("data-p",e.dataP),l(2),s("ngIf",e.startTemplate??e._startTemplate),l(),w(e.cx("list")),s("pBind",e.ptm("list")),y("id",e.id+"_list")("tabindex",e.getTabIndexValue())("data-pc-section","menu")("aria-activedescendant",e.activedescendant())("aria-label",e.ariaLabel)("aria-labelledBy",e.ariaLabelledBy),l(2),s("ngIf",e.hasSubMenu()),l(),s("ngIf",!e.hasSubMenu()),l(),s("ngIf",e.endTemplate??e._endTemplate)}}var ei={root:({instance:t})=>({position:t.popup?"absolute":"relative"})},ti={root:({instance:t})=>["p-menu p-component",{"p-menu-overlay":t.popup}],start:"p-menu-start",list:"p-menu-list",submenuLabel:"p-menu-submenu-label",separator:"p-menu-separator",end:"p-menu-end",item:({instance:t,item:i,id:e})=>["p-menu-item",{"p-focus":t.focusedOptionId()&&e===t.focusedOptionId(),"p-disabled":t.disabled(i.disabled)},i.styleClass],itemContent:"p-menu-item-content",itemLink:"p-menu-item-link",itemIcon:({item:t})=>["p-menu-item-icon",t.icon,t.iconClass],itemLabel:"p-menu-item-label"},ve=(()=>{class t extends vt{name="menu";style=Kt;classes=ti;inlineStyles=ei;static \u0275fac=(()=>{let e;return function(o){return(e||(e=nt(t)))(o||t)}})();static \u0275prov=Ye({token:t,factory:t.\u0275fac})}return t})();var Zt=new et("MENU_INSTANCE"),Yt=(()=>{class t{platformId;sanitizer;constructor(e,n){this.platformId=e,this.sanitizer=n}transform(e){return!e||!oe(this.platformId)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(n){return new(n||t)(Y(it,16),Y(ue,16))};static \u0275pipe=rt({name:"safeHtml",type:t,pure:!0})}return t})(),ni=(()=>{class t extends $e{item;itemTemplate;menuitemId=z("");idx=z(0);onMenuItemClick=new O;menu;_componentStyle=S(ve);hostName="Menu";constructor(e){super(),this.menu=e}onItemClick(e,n){this.onMenuItemClick.emit({originalEvent:e,item:n})}getPTOptions(e){return this.menu.getPTOptions(e,this.item,this.idx(),this.menuitemId())}static \u0275fac=function(n){return new(n||t)(Y(Xe(()=>Te)))};static \u0275cmp=E({type:t,selectors:[["","pMenuItemContent",""]],inputs:{item:[0,"pMenuItemContent","item"],itemTemplate:"itemTemplate",menuitemId:[1,"menuitemId"],idx:[1,"idx"]},outputs:{onMenuItemClick:"onMenuItemClick"},features:[ke([ve]),Ie],attrs:sn,decls:5,vars:6,consts:[["itemContent",""],["htmlLabel",""],[3,"click","pBind"],[4,"ngIf"],["pRipple","",3,"class","ngStyle","target","pBind",4,"ngIf"],["routerLinkActive","p-menu-item-link-active","pRipple","",3,"routerLink","queryParams","routerLinkActiveOptions","class","ngStyle","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","pBind",4,"ngIf"],["pRipple","",3,"ngStyle","target","pBind"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["routerLinkActive","p-menu-item-link-active","pRipple","",3,"routerLink","queryParams","routerLinkActiveOptions","ngStyle","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","pBind"],[3,"class","pBind","ngStyle",4,"ngIf"],[3,"class","ngStyle","pBind",4,"ngIf","ngIfElse"],[3,"styleClass","value","pt","unstyled",4,"ngIf"],[3,"pBind","ngStyle"],[3,"ngStyle","pBind"],[3,"ngStyle","innerHTML","pBind"],[3,"styleClass","value","pt","unstyled"]],template:function(n,o){if(n&1){let r=T();d(0,"div",2),f("click",function(x){return m(r),u(o.onItemClick(x,o.item))}),_(1,gn,3,2,"ng-container",3)(2,hn,2,4,"ng-container",3)(3,vn,5,4,"ng-template",null,0,ne),c()}n&2&&(w(o.cx("itemContent")),s("pBind",o.getPTOptions("itemContent")),y("data-pc-section","content"),l(),s("ngIf",!o.itemTemplate),l(),s("ngIf",o.itemTemplate))},dependencies:[B,ie,Ae,He,Ne,_t,ft,kt,W,G,j,xe,se,Re,Yt],encapsulation:2})}return t})(),Te=(()=>{class t extends $e{overlayService;model;popup;style;styleClass;autoZIndex=!0;baseZIndex=0;showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)";hideTransitionOptions=".1s linear";ariaLabel;ariaLabelledBy;id;tabindex=0;appendTo=z(void 0);motionOptions=z(void 0);computedMotionOptions=K(()=>k(k({},this.ptm("motion")),this.motionOptions()));onShow=new O;onHide=new O;onBlur=new O;onFocus=new O;listViewChild=Pe("list");containerViewChild=Pe("container");$appendTo=K(()=>this.appendTo()||this.config.overlayAppendTo());container;scrollHandler;documentClickListener;documentResizeListener;preventDocumentDefault;target;visible;focusedOptionId=K(()=>this.focusedOptionIndex()!==-1?this.focusedOptionIndex():null);focusedOptionIndex=b(-1);selectedOptionIndex=b(-1);focused=!1;overlayVisible=!1;$pcMenu=S(Zt,{optional:!0,skipSelf:!0})??void 0;_componentStyle=S(ve);bindDirectiveInstance=S(G,{self:!0});onAfterViewChecked(){this.bindDirectiveInstance.setAttrs(this.ptm("host"))}constructor(e){super(),this.overlayService=e,this.id=this.id||yt("pn_id_")}getPTOptions(e,n,o,r){return this.ptm(e,{context:{item:n,index:o,focused:this.isItemFocused(r),disabled:this.disabled(n.disabled)}})}toggle(e){this.visible?this.hide():this.show(e),this.preventDocumentDefault=!0}show(e){this.container&&!this.overlayVisible&&(this.container=void 0),this.target=e.currentTarget,this.visible=!0,this.preventDocumentDefault=!0,this.overlayVisible=!0,this.cd.markForCheck()}onInit(){this.popup||this.bindDocumentClickListener()}startTemplate;_startTemplate;endTemplate;_endTemplate;headerTemplate;_headerTemplate;itemTemplate;_itemTemplate;submenuHeaderTemplate;_submenuHeaderTemplate;templates;onAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"start":this._startTemplate=e.template;break;case"end":this._endTemplate=e.template;break;case"item":this._itemTemplate=e.template;break;case"submenuheader":this._submenuHeaderTemplate=e.template;break;default:this._itemTemplate=e.template;break}})}getTabIndexValue(){return this.tabindex!==void 0?this.tabindex.toString():null}onOverlayBeforeEnter(e){if(this.container=e.element,this.container){let n=xt(this.containerViewChild()?.nativeElement);ze(this.container,{width:n+"px"}),ze(this.container,{position:"absolute",top:"0"}),this.appendOverlay(),this.moveOnTop(),this.$attrSelector&&this.container?.setAttribute(this.$attrSelector,""),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),ht(this.container,this.target),ae(this.listViewChild()?.nativeElement),this.onShow.emit({})}}onOverlayAfterLeave(){this.restoreOverlayAppend(),this.onOverlayHide(),this.onHide.emit({})}appendOverlay(){this.$appendTo()&&this.$appendTo()!=="self"&&(this.$appendTo()==="body"?ge(this.document.body,this.container):ge(this.$appendTo(),this.container))}restoreOverlayAppend(){this.container&&this.$appendTo()!=="self"&&ge(this.el.nativeElement,this.container)}moveOnTop(){this.autoZIndex&&he.set("menu",this.container,this.baseZIndex+this.config.zIndex.menu)}hide(){this.visible=!1,this.overlayVisible=!1,this.cd.markForCheck()}onWindowResize(){this.visible&&!bt()&&this.hide()}menuitemId(e,n,o,r){return e?.id??`${n}_${o}${r!==void 0?"_"+r:""}`}isItemFocused(e){return this.focusedOptionId()===e}label(e){return typeof e=="function"?e():e}disabled(e){return typeof e=="function"?e():typeof e>"u"?!1:e}activedescendant(){return this.focused?this.focusedOptionId():void 0}onListFocus(e){this.focused||(this.focused=!0,!this.popup&&this.changeFocusedOptionIndex(0),this.onFocus.emit(e))}onListBlur(e){this.focused&&(this.focused=!1,this.changeFocusedOptionIndex(-1),this.selectedOptionIndex.set(-1),this.focusedOptionIndex.set(-1),this.onBlur.emit(e))}onListKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Enter":this.onEnterKey(e);break;case"NumpadEnter":this.onEnterKey(e);break;case"Space":this.onSpaceKey(e);break;case"Escape":case"Tab":this.popup&&(ae(this.target),this.hide()),this.overlayVisible&&this.hide();break;default:break}}onArrowDownKey(e){let n=this.findNextOptionIndex(this.focusedOptionIndex());this.changeFocusedOptionIndex(n),e.preventDefault()}onArrowUpKey(e){if(e.altKey&&this.popup)ae(this.target),this.hide(),e.preventDefault();else{let n=this.findPrevOptionIndex(this.focusedOptionIndex());this.changeFocusedOptionIndex(n),e.preventDefault()}}onHomeKey(e){this.changeFocusedOptionIndex(0),e.preventDefault()}onEndKey(e){this.changeFocusedOptionIndex(re(this.containerViewChild()?.nativeElement,'li[data-pc-section="menuitem"][data-p-disabled="false"]').length-1),e.preventDefault()}onEnterKey(e){let n=_e(this.containerViewChild()?.nativeElement,`li[id="${`${this.focusedOptionIndex()}`}"]`),o=n&&(_e(n,'[data-pc-section="itemlink"]')||_e(n,"a,button"));this.popup&&ae(this.target),o?o.click():n&&n.click(),e.preventDefault()}onSpaceKey(e){this.onEnterKey(e)}findNextOptionIndex(e){let o=[...re(this.containerViewChild()?.nativeElement,'li[data-pc-section="menuitem"][data-p-disabled="false"]')].findIndex(r=>r.id===e);return o>-1?o+1:0}findPrevOptionIndex(e){let o=[...re(this.containerViewChild()?.nativeElement,'li[data-pc-section="menuitem"][data-p-disabled="false"]')].findIndex(r=>r.id===e);return o>-1?o-1:0}changeFocusedOptionIndex(e){let n=re(this.containerViewChild()?.nativeElement,'li[data-pc-section="menuitem"][data-p-disabled="false"]');if(n.length>0){let o=e>=n.length?n.length-1:e<0?0:e;o>-1&&this.focusedOptionIndex.set(n[o].getAttribute("id"))}}itemClick(e,n){let{originalEvent:o,item:r}=e;if(this.focused||(this.focused=!0,this.onFocus.emit()),r.disabled){o.preventDefault();return}!r.url&&!r.routerLink&&o.preventDefault(),r.command&&r.command({originalEvent:o,item:r}),this.popup&&this.hide(),!this.popup&&this.focusedOptionIndex()!==n&&this.focusedOptionIndex.set(n)}onOverlayClick(e){this.popup&&this.overlayService.add({originalEvent:e,target:this.el.nativeElement}),this.preventDocumentDefault=!0}bindDocumentClickListener(){if(!this.documentClickListener&&oe(this.platformId)){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",n=>{let o=this.containerViewChild()?.nativeElement&&!this.containerViewChild()?.nativeElement.contains(n.target),r=!(this.target&&(this.target===n.target||this.target.contains(n.target)));!this.popup&&o&&r&&this.onListBlur(n),this.preventDocumentDefault&&this.overlayVisible&&o&&r&&(this.hide(),this.preventDocumentDefault=!1)})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){if(!this.documentResizeListener&&oe(this.platformId)){let e=this.document.defaultView;this.documentResizeListener=this.renderer.listen(e,"resize",this.onWindowResize.bind(this))}}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindScrollListener(){!this.scrollHandler&&oe(this.platformId)&&(this.scrollHandler=new Ot(this.target,()=>{this.visible&&this.hide()})),this.scrollHandler?.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&(this.scrollHandler.unbindScrollListener(),this.scrollHandler=null)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.preventDocumentDefault=!1,this.cd.destroyed||(this.target=null),this.container&&(this.autoZIndex&&he.clear(this.container),this.container=void 0)}onDestroy(){this.popup&&(this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.container&&(this.autoZIndex&&he.clear(this.container),this.container=void 0),this.restoreOverlayAppend(),this.onOverlayHide()),this.popup||this.unbindDocumentClickListener()}hasSubMenu(){return this.model?.some(e=>e.items)??!1}isItemHidden(e){return e.separator?e.visible===!1||e.items&&e.items.some(n=>n.visible!==!1):e.visible===!1}get dataP(){return this.cn({popup:this.popup})}static \u0275fac=function(n){return new(n||t)(Y(Ct))};static \u0275cmp=E({type:t,selectors:[["p-menu"]],contentQueries:function(n,o,r){if(n&1&&st(r,wn,4)(r,Tn,4)(r,Mn,4)(r,Sn,4)(r,On,4)(r,fe,4),n&2){let a;L(a=V())&&(o.startTemplate=a.first),L(a=V())&&(o.endTemplate=a.first),L(a=V())&&(o.headerTemplate=a.first),L(a=V())&&(o.itemTemplate=a.first),L(a=V())&&(o.submenuHeaderTemplate=a.first),L(a=V())&&(o.templates=a)}},viewQuery:function(n,o){n&1&&pt(o.listViewChild,In,5)(o.containerViewChild,Dn,5),n&2&&dt(2)},inputs:{model:"model",popup:[2,"popup","popup",Fe],style:"style",styleClass:"styleClass",autoZIndex:[2,"autoZIndex","autoZIndex",Fe],baseZIndex:[2,"baseZIndex","baseZIndex",Be],showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",id:"id",tabindex:[2,"tabindex","tabindex",Be],appendTo:[1,"appendTo"],motionOptions:[1,"motionOptions"]},outputs:{onShow:"onShow",onHide:"onHide",onBlur:"onBlur",onFocus:"onFocus"},features:[ke([ve,{provide:Zt,useExisting:t},{provide:St,useExisting:t}]),at([G]),Ie],decls:4,vars:1,consts:[["sharedcontent",""],["container",""],["list",""],["htmlSubmenuLabel",""],["name","p-anchored-overlay",3,"visible","appear","options"],["name","p-anchored-overlay",3,"onBeforeEnter","onAfterLeave","visible","appear","options"],[4,"ngTemplateOutlet"],[3,"click","ngStyle","pBind"],[3,"class","pBind",4,"ngIf"],["role","menu",3,"focus","blur","keydown","pBind"],[4,"ngIf"],[3,"pBind"],["ngFor","",3,"ngForOf"],["role","separator",3,"class","pBind",4,"ngIf"],["pTooltip","","role","none",3,"class","pBind","tooltipOptions","pTooltipUnstyled",4,"ngIf"],["role","separator",3,"pBind"],["pTooltip","","role","none",3,"pBind","tooltipOptions","pTooltipUnstyled"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf","ngIfElse"],[3,"innerHTML"],["pTooltip","","role","menuitem",3,"class","pMenuItemContent","itemTemplate","idx","menuitemId","style","tooltipOptions","pTooltipUnstyled","unstyled","onMenuItemClick",4,"ngIf"],["pTooltip","","role","menuitem",3,"onMenuItemClick","pMenuItemContent","itemTemplate","idx","menuitemId","tooltipOptions","pTooltipUnstyled","unstyled"],["pTooltip","","role","menuitem",3,"class","pMenuItemContent","itemTemplate","idx","menuitemId","ngStyle","tooltipOptions","unstyled","pTooltipUnstyled","onMenuItemClick",4,"ngIf"],["pTooltip","","role","menuitem",3,"onMenuItemClick","pMenuItemContent","itemTemplate","idx","menuitemId","ngStyle","tooltipOptions","unstyled","pTooltipUnstyled"]],template:function(n,o){n&1&&(C(0,En,2,4,"p-motion",4)(1,Vn,1,1,"ng-container"),_(2,Jn,8,21,"ng-template",null,0,ne)),n&2&&v(o.popup?0:1)},dependencies:[B,ut,ie,Ae,He,Ne,ni,W,Vt,G,j,se,Re,Dt,It,Yt],encapsulation:2,changeDetection:0})}return t})(),Jt=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=ot({type:t});static \u0275inj=Je({imports:[Te,se,se]})}return t})();var ri=()=>({width:"95vw",maxWidth:"1400px",height:"90vh"}),ai=()=>({width:"90vw",maxWidth:"400px"}),si=()=>({top:"2px",right:"2px","min-width":"1.1rem",height:"1.1rem","line-height":"1.1rem","font-size":"9px",padding:"0"}),li=()=>({top:"-8px",right:"-8px","min-width":"1.2rem",height:"1.2rem","line-height":"1.2rem","font-size":"10px",padding:"0"}),pi=()=>({top:"10px",right:"16px","min-width":"1.2rem",height:"1.2rem","line-height":"1.2rem","font-size":"10px",padding:"0"}),di=(t,i)=>i.value;function ci(t,i){if(t&1&&g(0,"img",25),t&2){let e=p().$implicit,n=p();s("src",n.getFullUrl(e.path_avatar),de)}}function mi(t,i){t&1&&g(0,"i",26)}function ui(t,i){if(t&1&&g(0,"span",29),t&2){let e=p().$implicit,n=p();s("innerHTML",n.highlightText(e.packer_name),Q)}}function gi(t,i){if(t&1&&(d(0,"div",23)(1,"div",24),C(2,ci,1,1,"img",25)(3,mi,1,0,"i",26),c(),d(4,"div",27),g(5,"span",28),C(6,ui,1,1,"span",29),c()()),t&2){let e=i.$implicit,n=p();l(2),v(e.path_avatar?2:3),l(3),s("innerHTML",n.highlightText(e.code),Q),l(),v(e.packer_name?6:-1)}}function _i(t,i){if(t&1){let e=T();d(0,"button",30),f("click",function(){m(e);let o=p();return u(o.onClearSearch())}),c()}}function fi(t,i){if(t&1&&g(0,"p-badge",31),t&2){let e=p();F(N(3,si)),s("value",e.badgeValue().toString())}}function hi(t,i){if(t&1&&g(0,"p-badge",31),t&2){let e=p(3);F(N(3,li)),s("value",e.badgeValue().toString())}}function xi(t,i){if(t&1){let e=T();d(0,"div",35)(1,"p-chip",39),f("click",function(){let o=m(e).$implicit,r=p(2);return u(r.selectPreset(o.value))}),c(),_(2,hi,1,4,"p-badge",12),c()}if(t&2){let e=i.$implicit,n=p(2);l(),s("label",e.label)("styleClass",n.activePreset()===e.value?"bg-primary text-white cursor-pointer text-sm font-medium px-3 py-1":"surface-100 text-600 cursor-pointer hover:surface-200 transition-colors text-sm px-3 py-1"),l(),s("ngIf",n.activePreset()===e.value&&n.badgeValue()>0)}}function bi(t,i){if(t&1&&g(0,"p-badge",31),t&2){let e=p(2);F(N(3,pi)),s("value",e.badgeValue().toString())}}function yi(t,i){if(t&1){let e=T();d(0,"div",13)(1,"span",32),g(2,"i",33),h(3,"Th\u1EDDi gian:"),c(),d(4,"div",34),J(5,xi,3,3,"div",35,di),c(),d(7,"span",36),h(8,"|"),c(),d(9,"div",37)(10,"p-chip")(11,"p-datepicker",38),U("ngModelChange",function(o){m(e);let r=p();return R(r.rangeDates,o)||(r.rangeDates=o),u(o)}),f("onSelect",function(){m(e);let o=p();return u(o.onCustomDateSelect())}),c()(),_(12,bi,1,4,"p-badge",12),c()()}if(t&2){let e=p();l(5),ee(e.presets),l(6),$("ngModel",e.rangeDates),s("readonlyInput",!0)("showIcon",!0),l(),s("ngIf",e.badgeValue()>0&&(e.rangeDates==null?null:e.rangeDates.length))}}function Ci(t,i){if(t&1&&g(0,"app-order-detail",41),t&2){let e=p(2);s("inputCode",e.foundOrderCode||e.selectedCode)("isDialogMode",!0)}}function vi(t,i){if(t&1&&_(0,Ci,1,2,"app-order-detail",40),t&2){let e=p();s("ngIf",e.showDetailDialog)}}var Me=class t{orderService=S(Ce);sanitizer=S(ue);filterChange=new O;openQrScanner=new O;isShowFilter=z(!0);badgeValue=z(0);showDateDialog=!1;suggestions=b([]);activePreset=b("today");searchKeyword=b("");totalOrders=b(0);showQrDialog=!1;showDetailDialog=!1;foundOrderCode=null;selectedCode=null;rangeDates;presets=[{label:"H\xF4m nay",value:"today"},{label:"H\xF4m qua",value:"yesterday"},{label:"7 ng\xE0y qua",value:"last7days"},{label:"15 ng\xE0y qua",value:"last15days"}];menuItems=K(()=>{let i=this.activePreset();return[...this.presets.map(e=>({label:e.label,icon:i===e.value?"pi pi-check text-primary":"pi pi-calendar",command:()=>this.selectPreset(e.value)})),{separator:!0},{label:"T\xF9y ch\u1ECDn ng\xE0y",icon:i==="custom"?"pi pi-check text-primary":"pi pi-calendar-plus",command:()=>{this.showDateDialog=!0}}]});constructor(){setTimeout(()=>this.emitCurrentState(),0)}removeAccents(i){return i?i.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D").toLowerCase():""}highlightText(i){if(!i)return"";let e=this.searchKeyword().trim();if(!e)return i;let n=new RegExp(`(${e})`,"gi");return this.sanitizer.bypassSecurityTrustHtml(i.replace(n,'<span class="highlight-match">$1</span>'))}searchOrders(i){let e=i.query;this.searchKeyword.set(e);let n=this.removeAccents(e);this.orderService.getOrders({page:0,pageSize:50,code:e}).subscribe({next:o=>{let r=o.data||{},a=[];Array.isArray(r)?a=r:r.items&&Array.isArray(r.items)&&(a=r.items);let x=Array.from(new Map(a.map(M=>[M.code,M])).values());n&&(x=x.filter(M=>{let H=this.removeAccents(M.code),X=this.removeAccents(M.packer_name||"");return H.includes(n)||X.includes(n)})),this.suggestions.set(x.slice(0,10))},error:()=>this.suggestions.set([])})}onOrderSelect(i){let e=i.value;this.selectedCode=e.code,this.handleSelect(this.selectedCode),this.calculateTotalOrders(this.selectedCode)}handleSelect(i){this.emitWithOverride({code:i})}onClearSearch(){this.selectedCode=null,this.searchKeyword.set(""),this.totalOrders.set(0),this.emitWithOverride({code:void 0})}calculateTotalOrders(i){i&&this.orderService.getOrders({code:i,page:0,pageSize:100}).subscribe({next:e=>{let n=e.data||{},o=[];if(Array.isArray(n)?o=n:n.items&&Array.isArray(n.items)&&(o=n.items),o.length>0){let r=0;o.forEach(a=>{r++,a.history_logs&&Array.isArray(a.history_logs)&&(r+=a.history_logs.length)}),this.totalOrders.set(r),this.foundOrderCode=i}else this.totalOrders.set(0)},error:()=>this.totalOrders.set(0)})}selectPreset(i){this.activePreset.set(i),this.rangeDates=void 0,this.emitCurrentState()}onCustomDateSelect(){this.rangeDates&&this.rangeDates.length>0&&(this.activePreset.set("custom"),this.emitCurrentState())}getFullUrl(i){if(!i)return"";let e=Z.apiUrl.endsWith("/")?Z.apiUrl.slice(0,-1):Z.apiUrl,n=i.startsWith("/")?i:`/${i}`;return`${e}${n}`}emitCurrentState(){let i=this.selectedCode||void 0,e=this.activePreset(),n={date_preset:e};e==="custom"&&this.rangeDates&&(n={date_preset:void 0,start_date:this.rangeDates[0],end_date:this.rangeDates[1]||this.rangeDates[0]}),this.filterChange.emit(k({code:i},n))}emitWithOverride(i){let e=this.activePreset(),n={date_preset:e};e==="custom"&&this.rangeDates&&(n={date_preset:void 0,start_date:this.rangeDates[0],end_date:this.rangeDates[1]||this.rangeDates[0]}),this.filterChange.emit(k(k({},n),i))}onQrScanSuccess(i){this.selectedCode=i,this.handleSelect(i),this.calculateTotalOrders(i),this.showQrDialog=!1}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-order-search"]],inputs:{isShowFilter:[1,"isShowFilter"],badgeValue:[1,"badgeValue"]},outputs:{filterChange:"filterChange",openQrScanner:"openQrScanner"},decls:23,vars:27,consts:[["mobileMenu",""],[1,"border-none","shadow-1","surface-card","border-round","p-3"],[1,"p-toolbar-group-start","flex","flex-wrap","align-items-center","w-full","gap-3"],[1,"flex-1","min-w-0",2,"min-width","280px","max-width","500px"],[1,"search-group","flex","align-items-center","bg-gray-100","border-round-3xl","px-2","border-1","border-transparent","transition-all","transition-duration-200","focus-within:bg-white","focus-within:border-primary","focus-within:shadow-input"],[1,"pi","pi-search","text-500","ml-2"],["field","code","dataKey","code","placeholder","Nh\u1EADp m\xE3 \u0111\u01A1n, S\u0110T...","styleClass","w-full border-none","inputStyleClass","w-full border-none shadow-none text-base bg-transparent p-2","panelStyleClass","box-search-panel",3,"ngModelChange","completeMethod","onSelect","onClear","ngModel","suggestions","delay","showClear"],["pTemplate","item"],["pButton","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-secondary","p-button-sm","w-2rem","h-2rem","flex-shrink-0"],["pButton","","type","button","icon","pi pi-qrcode",1,"p-button-rounded","p-button-text","p-button-primary","w-2rem","h-2rem","mr-1","flex-shrink-0",3,"click"],[1,"relative","sm:hidden","ml-auto","flex","align-items-center","justify-content-center"],["pButton","","icon","pi pi-filter",1,"p-button-text","p-button-rounded",3,"click"],["severity","danger","styleClass","absolute shadow-2",3,"value","style",4,"ngIf"],[1,"hidden","sm:flex","align-items-center","gap-2","flex-wrap","flex-shrink-0"],[3,"model","popup"],[3,"visibleChange","scanSuccess","visible"],["styleClass","order-detail-dialog",3,"visibleChange","visible","modal","maximizable","dismissableMask","header"],["pTemplate","content"],["header","Ch\u1ECDn kho\u1EA3ng th\u1EDDi gian",3,"visibleChange","visible","modal","dismissableMask"],[1,"flex","flex-column","align-items-center","gap-3","pt-2"],["selectionMode","range","styleClass","w-full",3,"ngModelChange","onSelect","ngModel","readonlyInput","inline"],[1,"w-full","flex","justify-content-end"],["pButton","","label","Xong",1,"p-button-sm",3,"click"],[1,"flex","align-items-center","gap-3","p-1"],[1,"w-2rem","h-2rem","border-circle","overflow-hidden","flex","align-items-center","justify-content-center","bg-gray-100","border-1","border-300","flex-shrink-0"],["alt","avatar",1,"w-full","h-full","object-cover",3,"src"],[1,"pi","pi-box","text-500"],[1,"flex","flex-column","gap-1","overflow-hidden"],[1,"font-bold","text-900","line-height-1",3,"innerHTML"],[1,"text-xs","text-500",3,"innerHTML"],["pButton","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-secondary","p-button-sm","w-2rem","h-2rem","flex-shrink-0",3,"click"],["severity","danger","styleClass","absolute shadow-2",3,"value"],[1,"text-500","text-sm","font-medium"],[1,"pi","pi-filter","mr-1"],[1,"flex","gap-3","align-items-center","mt-2","ml-1"],[1,"relative","inline-flex","align-items-center","justify-content-center","overflow-visible"],[1,"mx-1","text-300"],[1,"relative","inline-flex","align-items-center","justify-content-center"],["selectionMode","range","placeholder","T\xF9y ch\u1ECDn ng\xE0y...","inputStyleClass","text-sm border-round-2xl cursor-pointer","styleClass","p-inputtext-sm",3,"ngModelChange","onSelect","ngModel","readonlyInput","showIcon"],[3,"click","label","styleClass"],[3,"inputCode","isDialogMode",4,"ngIf"],[3,"inputCode","isDialogMode"]],template:function(e,n){if(e&1){let o=T();d(0,"p-toolbar",1)(1,"div",2)(2,"div",3)(3,"div",4),g(4,"i",5),d(5,"p-autoComplete",6),U("ngModelChange",function(a){return m(o),R(n.selectedCode,a)||(n.selectedCode=a),u(a)}),f("completeMethod",function(a){return m(o),u(n.searchOrders(a))})("onSelect",function(a){return m(o),u(n.onOrderSelect(a))})("onClear",function(){return m(o),u(n.onClearSearch())}),_(6,gi,7,3,"ng-template",7),c(),C(7,_i,1,0,"button",8),d(8,"button",9),f("click",function(){return m(o),u(n.showQrDialog=!0)}),c()()(),d(9,"div",10)(10,"button",11),f("click",function(a){m(o);let x=P(14);return u(x.toggle(a))}),c(),_(11,fi,1,4,"p-badge",12),c(),C(12,yi,13,4,"div",13),c()(),g(13,"p-menu",14,0),d(15,"app-qr-scan-dialog",15),U("visibleChange",function(a){return m(o),R(n.showQrDialog,a)||(n.showQrDialog=a),u(a)}),f("scanSuccess",function(a){return m(o),u(n.onQrScanSuccess(a))}),c(),d(16,"p-dialog",16),U("visibleChange",function(a){return m(o),R(n.showDetailDialog,a)||(n.showDetailDialog=a),u(a)}),_(17,vi,1,1,"ng-template",17),c(),d(18,"p-dialog",18),U("visibleChange",function(a){return m(o),R(n.showDateDialog,a)||(n.showDateDialog=a),u(a)}),d(19,"div",19)(20,"p-datepicker",20),U("ngModelChange",function(a){return m(o),R(n.rangeDates,a)||(n.rangeDates=a),u(a)}),f("onSelect",function(){return m(o),u(n.onCustomDateSelect())}),c(),d(21,"div",21)(22,"button",22),f("click",function(){return m(o),u(n.showDateDialog=!1)}),c()()()()}e&2&&(l(5),$("ngModel",n.selectedCode),s("suggestions",n.suggestions())("delay",400)("showClear",!1),l(2),v(n.selectedCode||n.searchKeyword()?7:-1),l(4),s("ngIf",n.badgeValue()>0),l(),v(n.isShowFilter()?12:-1),l(),s("model",n.menuItems())("popup",!0),l(2),$("visible",n.showQrDialog),l(),F(N(25,ri)),$("visible",n.showDetailDialog),s("modal",!0)("maximizable",!0)("dismissableMask",!0)("header","Chi ti\u1EBFt \u0111\u01A1n h\xE0ng: "+(n.foundOrderCode||n.selectedCode)),l(2),F(N(26,ai)),$("visible",n.showDateDialog),s("modal",!0)("dismissableMask",!0),l(2),$("ngModel",n.rangeDates),s("readonlyInput",!0)("inline",!0))},dependencies:[B,ie,Mt,wt,Tt,At,Ht,fe,Nt,zt,jt,Ut,ye,be,Qt,Wt,Jt,Te,Rt,$t,W,j,xe,Bt,Ft,qt,Pt],styles:[`@charset "UTF-8";@media screen and (max-width:576px){.sm\\:hidden{display:flex!important}.sm\\:flex{display:none!important}}@media screen and (min-width:577px){.sm\\:hidden{display:none!important}.sm\\:flex{display:flex!important}}.search-group{background-color:#f1f5f9;border-radius:999px;border:1px solid transparent;transition:all .2s ease;padding:2px 4px;display:flex;align-items:center;width:100%}.search-group:focus-within{background-color:#fff;border-color:var(--primary-color);box-shadow:0 0 0 2px #3b82f633}.search-group i.pi-search{font-size:1rem}:host ::ng-deep .p-autocomplete{flex:1;width:100%}:host ::ng-deep .p-autocomplete-input{width:100%;background:transparent!important;box-shadow:none!important;border:none!important;padding-left:.5rem!important;font-size:1rem}:host ::ng-deep .p-autocomplete-input:focus{outline:none}:host ::ng-deep .p-autocomplete-panel{border-radius:12px!important;margin-top:8px!important;box-shadow:0 10px 30px -5px #00000026!important;border:1px solid #e2e8f0!important}:host ::ng-deep .p-autocomplete-items{padding:6px!important}:host ::ng-deep .p-autocomplete-item{border-radius:8px!important;margin-bottom:2px!important}:host ::ng-deep .p-autocomplete-item.p-focus{background-color:#eff6ff!important}:host ::ng-deep .p-datepicker-trigger{background-color:transparent;color:var(--text-color-secondary);border-color:var(--surface-border)}.highlight-match{font-weight:800!important;color:var(--primary-color)!important;background-color:#3b82f61a;padding:0 2px;border-radius:2px}.font-light{font-weight:300!important}p-motion{top:48px!important}
`],encapsulation:2})};var wi=["scrollContainer"],Ti=(t,i,e)=>({"bg-green-500":t,"bg-blue-500":i,"bg-red-500":e}),Mi=(t,i)=>i.rootId,Si=(t,i)=>i.data.id;function Oi(t,i){t&1&&(d(0,"span",13),h(1,"\u0110\xE3 h\u1EE7y"),c())}function Ii(t,i){if(t&1&&(d(0,"span",19),g(1,"i",29),h(2),c()),t&2){let e=p().$implicit;l(2),I(" Repack: ",e.repackCount," ")}}function Di(t,i){if(t&1&&(d(0,"span",37),h(1),c()),t&2){let e=p().$implicit;l(),I(" \u0110\xE3 \u0111\u1ED5i m\xE3: ",e.data.code," ")}}function ki(t,i){if(t&1){let e=T();d(0,"div",30),f("click",function(){let o=m(e).$implicit,r=p().$implicit,a=p();return u(a.viewDetail(o.data,r.latestOrder.code))}),d(1,"div",31),g(2,"div",32),c(),d(3,"div",33),h(4),c(),d(5,"div",34)(6,"div",35)(7,"span",36),h(8),c(),C(9,Di,2,1,"span",37),d(10,"span",38),h(11),c()(),d(12,"button",39),f("click",function(o){let r=m(e).$implicit,a=p().$implicit,x=p();return o.stopPropagation(),u(x.viewDetail(r.data,a.latestOrder.code))}),c()()()}if(t&2){let e=i.$implicit,n=i.$index,o=i.$count;De("border-bottom-1",n!==o-1),l(),s("ngClass",e.data.parent_id?"border-orange-400":"border-blue-400"),l(),s("ngClass",e.data.parent_id?"bg-orange-400":"bg-blue-400"),l(2),I(" ",e.timeStr," "),l(4),I(" ",e.data.note||"Chi ti\u1EBFt \u0111\u01A1n h\xE0ng"," "),l(),v(e.isCodeChanged?9:-1),l(2),I("ID: ",e.data.id),l(),s("text",!0)("rounded",!0)}}function Ei(t,i){if(t&1){let e=T();d(0,"div",4),f("click",function(o){let r=m(e).$implicit,a=p();return u(a.toggleExpand(r,o))}),g(1,"div",5),d(2,"div",6)(3,"div",7)(4,"div",8)(5,"span",9),h(6),c(),d(7,"span",10),h(8),c()()(),d(9,"div",11)(10,"div",3)(11,"span",12),h(12),c(),C(13,Oi,2,0,"span",13),c(),d(14,"div",14)(15,"span",15),g(16,"i",16),h(17),c(),d(18,"span",17),g(19,"i",18),h(20),c(),C(21,Ii,3,1,"span",19),d(22,"span",20),h(23),c()()(),d(24,"div",21)(25,"button",22),f("click",function(o){let r=m(e).$implicit,a=p();return o.stopPropagation(),u(a.viewDetail(r.latestOrder))}),c(),g(26,"button",23),c()(),d(27,"div",24)(28,"div",25),g(29,"div",26),d(30,"div",27),J(31,ki,13,10,"div",28,Si),c()()()()}if(t&2){let e=i.$implicit;De("expanded",e.isExpanded)("shadow-4",e.isExpanded)("shadow-1",!e.isExpanded),l(),s("ngClass",ct(19,Ti,e.latestOrder.status==="packed"||e.latestOrder.status==="closed",e.latestOrder.status==="packing"||e.latestOrder.status==="processing",e.latestOrder.status==="cancelled")),l(5),te(e.timeLabel),l(2),I("#",e.stt),l(4),I(" ",e.latestOrder.code," "),l(),v(e.latestOrder.status==="cancelled"?13:-1),l(4),I(" ",e.dateLabel," "),l(3),I(" G\u1ED1c: ",e.realCount," "),l(),v(e.repackCount>0?21:-1),l(2),I("",e.totalSteps," b\u01B0\u1EDBc x\u1EED l\xFD"),l(3),s("text",!0)("rounded",!0)("@rotateIcon",e.isExpanded?"expanded":"collapsed"),l(),s("@expandCollapse",e.isExpanded?"expanded":"collapsed"),l(4),ee(e.steps)}}function Li(t,i){t&1&&(d(0,"div",3),g(1,"i",40),d(2,"span",41),h(3,"\u0110ang t\u1EA3i th\xEAm..."),c()())}var Se=class t{orders=[];isLoadingMore=!1;hasMoreData=!0;loadMore=new O;scrollContainer;router=S(gt);scrollObserver=null;sessionGroups=b([]);ngOnChanges(i){if(i.orders){let e=this.processData(this.orders||[]);this.sessionGroups.set(e)}}ngAfterViewInit(){this.setupInfiniteScroll()}ngOnDestroy(){this.scrollObserver&&this.scrollObserver.disconnect()}processData(i){return!i||i.length===0?[]:i.map((e,n)=>{let o=e.history_logs||[],r=[e,...o];r.sort((D,Oe)=>new Date(Oe.created_at).getTime()-new Date(D.created_at).getTime());let a=r[0],x=r.filter(D=>D.parent_id!=null||D.note&&(D.note.toLowerCase().includes("repack")||D.note.toLowerCase().includes("check"))),M=r.length,H=x.length,X=M-H;X<0&&(X=0);let nn=r.map((D,Oe)=>{let Ke=r[Oe+1],on=Ke&&D.code!==Ke.code,Ze=new Date(D.created_at);return{data:D,isCodeChanged:!!on,timeStr:Ze.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),fullDateTimeStr:Ze.toLocaleString("vi-VN")}}),qe=new Date(a.created_at);return{stt:n+1,rootId:Number(a.id),dateLabel:qe.toLocaleDateString("vi-VN",{weekday:"short",day:"2-digit",month:"2-digit"}),timeLabel:qe.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),latestOrder:a,steps:nn,totalSteps:M,repackCount:H,realCount:X,durationStr:"",isExpanded:!1}})}setupInfiniteScroll(){let i={root:null,rootMargin:"100px",threshold:.1};this.scrollObserver=new IntersectionObserver(e=>{e[0].isIntersecting&&!this.isLoadingMore&&this.hasMoreData&&this.loadMore.emit()},i),setTimeout(()=>{let e=document.getElementById("scroll-sentinel");e&&this.scrollObserver?.observe(e)},500)}toggleExpand(i,e){e.stopPropagation();let n=i.isExpanded;this.sessionGroups.update(o=>(o.forEach(r=>{r.rootId!==i.rootId&&(r.isExpanded=!1)}),[...o])),i.isExpanded=!n,i.isExpanded&&setTimeout(()=>{let o=e.target.closest(".history-card");o&&o.scrollIntoView({behavior:"smooth",block:"center"})},300)}viewDetail(i,e){let n=e||i.code;this.router.navigate(["/order-detail",n],{queryParams:{playId:i.id}})}getAvatar(i){if(!i)return"";if(i.startsWith("http"))return i;let e=i.replace(/^(\.\.\/)+/,"");return`${Z.apiUrl}/${e}`}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-order-history"]],viewQuery:function(e,n){if(e&1&&lt(wi,5),e&2){let o;L(o=V())&&(n.scrollContainer=o.first)}},inputs:{orders:"orders",isLoadingMore:"isLoadingMore",hasMoreData:"hasMoreData"},outputs:{loadMore:"loadMore"},features:[tt],decls:5,vars:1,consts:[[1,"history-container","flex","flex-column","gap-3","pb-5","px-2"],[1,"history-card","w-full","cursor-pointer","group","bg-white","border-round-2xl","overflow-hidden","relative","border-1","border-transparent","transition-all","transition-duration-300",3,"expanded","shadow-4","shadow-1"],["id","scroll-sentinel",1,"h-3rem","flex","align-items-center","justify-content-center"],[1,"flex","align-items-center","gap-2"],[1,"history-card","w-full","cursor-pointer","group","bg-white","border-round-2xl","overflow-hidden","relative","border-1","border-transparent","transition-all","transition-duration-300",3,"click"],[1,"status-strip","absolute","left-0","top-0","bottom-0",2,"width","6px","z-index","1",3,"ngClass"],[1,"flex","p-3","align-items-center","pl-4"],[1,"mr-3"],[1,"time-box","flex","flex-column","align-items-center","justify-content-center","border-round-xl","surface-100","text-700",2,"width","4rem","height","4rem"],[1,"text-xl","font-bold","line-height-1"],[1,"text-xs","text-500","mt-1","font-medium"],[1,"flex-grow-1","min-w-0","flex","flex-column","justify-content-center","gap-2"],[1,"text-xl","font-bold","text-900","white-space-nowrap","hover:text-primary","transition-colors"],[1,"text-xs","font-bold","text-red-600","bg-red-100","px-2","py-1","border-round"],[1,"flex","align-items-center","flex-wrap","gap-2"],[1,"meta-capsule","bg-gray-50","text-gray-600","border-1","border-gray-200","px-2","py-1","border-round-2xl","text-xs","font-semibold","flex","align-items-center"],[1,"pi","pi-calendar","mr-1","text-[10px]"],[1,"meta-capsule","bg-blue-50","text-blue-600","border-1","border-blue-100","px-2","py-1","border-round-2xl","text-xs","font-semibold","flex","align-items-center"],[1,"pi","pi-box","mr-1","text-[10px]"],[1,"meta-capsule","bg-orange-50","text-orange-600","border-1","border-orange-100","px-2","py-1","border-round-2xl","text-xs","font-semibold","flex","align-items-center"],[1,"text-xs","text-gray-400","ml-1","font-medium","hidden","sm:inline"],[1,"flex","align-items-center","gap-4","pl-4","pr-2","border-left-1","border-gray-100","h-full"],["pButton","","icon","pi pi-play",1,"btn-play-gradient","flex","align-items-center","justify-content-center","p-0","border-circle","border-none","text-white","shadow-2","transition-transform","transition-duration-200","hover:scale-110",2,"width","3rem","height","3rem","background","linear-gradient(135deg, #f59e0b 0%, #ea580c 100%)",3,"click"],["pButton","","icon","pi pi-chevron-down","severity","secondary",1,"w-2rem","h-2rem","transition-transform",3,"text","rounded"],[1,"border-top-1","surface-border","bg-gray-50","relative","overflow-hidden"],[1,"history-details-scroll","relative"],[1,"absolute","left-0","top-0","bottom-0","border-left-2","border-dashed","border-300",2,"left","2rem","z-index","0"],[1,"p-3","pl-5","flex","flex-column","gap-0"],[1,"flex","relative","py-3","hover:surface-100","border-round","transition-colors","px-2","cursor-pointer",2,"border-color","rgba(0,0,0,0.05)",3,"border-bottom-1"],[1,"pi","pi-refresh","mr-1","text-[10px]"],[1,"flex","relative","py-3","hover:surface-100","border-round","transition-colors","px-2","cursor-pointer",2,"border-color","rgba(0,0,0,0.05)",3,"click"],[1,"absolute","mt-3","w-1rem","h-1rem","border-circle","bg-white","border-2","z-1","flex","align-items-center","justify-content-center",2,"left","-1.4rem",3,"ngClass"],[1,"w-1","h-1","border-circle",3,"ngClass"],[1,"w-4rem","text-right","text-xs","font-bold","text-gray-500","pt-1","mr-3","flex-shrink-0"],[1,"flex-grow-1","flex","align-items-center","justify-content-between"],[1,"flex","flex-column","gap-1"],[1,"text-sm","font-medium","text-gray-800"],[1,"text-xs","text-orange-600","bg-orange-100","px-2","border-round","w-fit"],[1,"text-[10px]","text-gray-400"],["pButton","","icon","pi pi-play",1,"text-gray-400","hover:text-primary","hover:bg-white","w-2rem","h-2rem",3,"click","text","rounded"],[1,"pi","pi-spin","pi-spinner","text-primary","text-xl"],[1,"text-gray-500","text-sm"]],template:function(e,n){e&1&&(d(0,"div",0),J(1,Ei,33,23,"div",1,Mi),d(3,"div",2),C(4,Li,4,0,"div",3),c()()),e&2&&(l(),ee(n.sessionGroups()),l(3),v(n.isLoadingMore?4:-1))},dependencies:[B,mt,ye,be,Lt,W,j,Et],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;width:100%}.history-card[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.history-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;border-color:#3b82f64d!important}.history-card.expanded[_ngcontent-%COMP%]{background-color:#fbfdff;border-color:#bfdbfe!important}.btn-play-gradient[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #f59e0b66}.btn-play-gradient[_ngcontent-%COMP%]:active{transform:scale(.95)}.text-\\__ph-0__[_ngcontent-%COMP%]{font-size:10px!important}.history-details-scroll[_ngcontent-%COMP%]{max-height:450px;overflow-y:auto;overscroll-behavior:contain}.history-details-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.history-details-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.history-details-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#cbd5e1;border-radius:10px;border:2px solid transparent;background-clip:content-box}.history-details-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#94a3b8}@media(max-width:400px){.time-box[_ngcontent-%COMP%]{width:3rem!important;height:3rem!important}.time-box[_ngcontent-%COMP%]   span.text-xl[_ngcontent-%COMP%]{font-size:1rem!important}.btn-play-gradient[_ngcontent-%COMP%]{width:2.5rem!important;height:2.5rem!important}}'],data:{animation:[Ue("expandCollapse",[pe("collapsed",le({height:"0px",opacity:0,overflow:"hidden",paddingTop:"0px",paddingBottom:"0px"})),pe("expanded",le({height:"*",opacity:1,overflow:"hidden",paddingTop:"*",paddingBottom:"*"})),We("collapsed <=> expanded",[je("300ms cubic-bezier(0.4, 0.0, 0.2, 1)")])]),Ue("rotateIcon",[pe("collapsed",le({transform:"rotate(0deg)"})),pe("expanded",le({transform:"rotate(180deg)"})),We("collapsed <=> expanded",je("300ms ease-out"))])]}})};function Vi(t,i){t&1&&(d(0,"div",3),g(1,"div",4)(2,"div",4)(3,"div",4),c())}function Pi(t,i){if(t&1){let e=T();d(0,"app-order-history",7),f("loadMore",function(){m(e);let o=p(2);return u(o.onLoadMore())}),c()}if(t&2){let e=p(2);s("orders",e.orders())("isLoadingMore",e.isLoadingMore())("hasMoreData",e.hasMoreData())}}function Fi(t,i){t&1&&(d(0,"div",6),g(1,"i",8),d(2,"span",9),h(3,"Kh\xF4ng t\xECm th\u1EA5y \u0111\u01A1n h\xE0ng n\xE0o"),c(),d(4,"span",10),h(5,"Th\u1EED t\xECm v\u1EDBi m\xE3 v\u1EADn \u0111\u01A1n kh\xE1c"),c()())}function Bi(t,i){t&1&&(d(0,"div",6),g(1,"i",11),d(2,"span",12),h(3,"Nh\u1EADp m\xE3 v\u1EADn \u0111\u01A1n \u0111\u1EC3 b\u1EAFt \u0111\u1EA7u tra c\u1EE9u"),c()())}function Hi(t,i){if(t&1&&(C(0,Pi,1,3,"app-order-history",5),C(1,Fi,6,0,"div",6),C(2,Bi,4,0,"div",6)),t&2){let e=p();v(e.orders().length>0?0:-1),l(),v(e.hasSearched()&&e.orders().length===0?1:-1),l(),v(e.hasSearched()?-1:2)}}var tn=class t{orderService=S(Ce);orders=b([]);totalRecords=b(0);currentPage=0;pageSize=20;currentParams={};isLoading=b(!1);isLoadingMore=b(!1);hasMoreData=b(!0);hasSearched=b(!1);ngOnInit(){}filterChange(i){this.currentParams=k({},i),this.currentPage=0,this.orders.set([]),this.hasMoreData.set(!0),this.hasSearched.set(!0),this.isLoading.set(!0),this.totalRecords.set(0),this.fetchData(!1)}onLoadMore(){this.isLoadingMore()||!this.hasMoreData()||this.isLoading()||(this.currentPage++,this.isLoadingMore.set(!0),this.fetchData(!0))}fetchData(i=!1){let e=Ge(k({},this.currentParams),{page:this.currentPage,page_size:this.pageSize});this.orderService.getOrders(e).subscribe({next:n=>{let o=n.data||{},r=o.items||[],a=o.total!==void 0?o.total:r.length;r.length<this.pageSize&&this.hasMoreData.set(!1),i?(this.orders.update(x=>[...x,...r]),this.isLoadingMore.set(!1)):(this.orders.set(r),this.totalRecords.set(r.length||0),this.isLoading.set(!1))},error:n=>{console.error("History API Error:",n),this.isLoading.set(!1),this.isLoadingMore.set(!1)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-history"]],decls:5,vars:2,consts:[[1,"flex","flex-column","h-full"],[3,"filterChange","badgeValue"],["id","history-scroll-container",1,"flex-grow-1","overflow-y-auto","p-3","bg-gray-50","relative"],[1,"flex","flex-column","gap-3"],[1,"surface-card","border-round-xl","h-8rem","w-full","shadow-1","animate-pulse","bg-white"],[3,"orders","isLoadingMore","hasMoreData"],[1,"flex","flex-column","align-items-center","justify-content-center","py-8","text-gray-400"],[3,"loadMore","orders","isLoadingMore","hasMoreData"],[1,"pi","pi-inbox","text-5xl","mb-3","opacity-50"],[1,"text-lg","font-medium"],[1,"text-sm","mt-1"],[1,"pi","pi-search","text-5xl","mb-3","opacity-30"],[1,"text-sm"]],template:function(e,n){e&1&&(d(0,"div",0)(1,"app-order-search",1),f("filterChange",function(r){return n.filterChange(r)}),c(),d(2,"div",2),C(3,Vi,4,0,"div",3)(4,Hi,3,3),c()()),e&2&&(l(),s("badgeValue",n.totalRecords()),l(2),v(n.isLoading()?3:4))},dependencies:[B,Me,Se],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;height:100vh;overflow:hidden}.flex.flex-column.h-full[_ngcontent-%COMP%]{height:100%;overflow:hidden}app-order-search[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background-color:var(--surface-ground, #f8fafc)}#history-scroll-container[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important;padding-bottom:2px!important}#history-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}#history-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#history-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#cbd5e1;border-radius:4px}#history-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#94a3b8}']})};export{tn as History};
