import{P as d,Sc as p,Tc as c,U as l,Xd as f,a as o}from"./chunk-ESYVRVYB.js";var n=class{http=l(c);get apiUrl(){return`${f.apiUrl}/${this.endpoint}`}findAll(e,t,r,a){let s=this.createHttpParams(e);return this.http.get(this.apiUrl,{params:s})}getById(e){return this.http.get(`${this.apiUrl}/${e}`)}create(e){return this.http.post(this.apiUrl,e)}update(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}delete(e){return this.http.delete(`${this.apiUrl}/${e}`)}createHttpParams(e){let t=new p;return e&&Object.keys(e).forEach(r=>{let a=e[r];a!=null&&a!==""&&(t=t.append(r,a))}),t}};var m=class i extends n{endpoint="orders";constructor(){super()}getOrders(e){let t=o({},e);t.startDate?(t.start_date=this.formatDateForBackend(t.startDate,!1),delete t.startDate):t.start_date&&t.start_date instanceof Date&&(t.start_date=this.formatDateForBackend(t.start_date,!1)),t.endDate?(t.end_date=this.formatDateForBackend(t.endDate,!0),delete t.endDate):t.end_date&&t.end_date instanceof Date&&(t.end_date=this.formatDateForBackend(t.end_date,!0));let r=t.rows||t.pageSize||10;return t.page_size=r,t.first!==void 0&&(t.page=Math.floor(t.first/r)),t.sortField&&(t.sort_by=t.sortField),t.sortOrder&&(t.sort_dir=t.sortOrder===1?"asc":"desc"),t.sort_by||(t.sort_by="created_at",t.sort_dir="desc"),["rows","pageSize","first","sortField","sortOrder","filters","globalFilter","multiSortMeta","forceUpdate"].forEach(s=>delete t[s]),Object.keys(t).forEach(s=>{(t[s]===null||t[s]===void 0||t[s]==="")&&delete t[s]}),this.findAll(t)}formatDateForBackend(e,t=!1){if(!e)return"";let r=new Date(e);if(isNaN(r.getTime()))return String(e);t&&r.setHours(23,59,59,999);let a=r.getFullYear(),s=("0"+(r.getMonth()+1)).slice(-2),u=("0"+r.getDate()).slice(-2),b=("0"+r.getHours()).slice(-2),h=("0"+r.getMinutes()).slice(-2),g=("0"+r.getSeconds()).slice(-2);return`${a}-${s}-${u} ${b}:${h}:${g}`}deleteOrder(e){return this.delete(e)}deleteAllOrders(){return this.http.delete(this.apiUrl)}getOrderFamily(e){return this.http.get(`${this.apiUrl}/family`,{params:{code:e}})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};export{m as a};
